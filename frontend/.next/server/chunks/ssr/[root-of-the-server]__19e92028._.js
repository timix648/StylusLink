module.exports=[108219,a=>{"use strict";var b=function(a,c){return(b=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(a,c)};function c(a,c){function d(){this.constructor=a}b(a,c),a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}var d=function(){return(d=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};function e(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c}function f(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g}function g(a,b){return function(c,d){b(c,d,a)}}function h(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)}function i(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})}function j(a,b){var c,d,e,f,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return f={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function h(f){return function(h){var i=[f,h];if(c)throw TypeError("Generator is already executing.");for(;g;)try{if(c=1,d&&(e=2&i[0]?d.return:i[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,i[1])).done)return e;switch(d=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return g.label++,{value:i[1],done:!1};case 5:g.label++,d=i[1],i=[0];continue;case 7:i=g.ops.pop(),g.trys.pop();continue;default:if(!(e=(e=g.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){g=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){g.label=i[1];break}if(6===i[0]&&g.label<e[1]){g.label=e[1],e=i;break}if(e&&g.label<e[2]){g.label=e[2],g.ops.push(i);break}e[2]&&g.ops.pop(),g.trys.pop();continue}i=b.call(a,g)}catch(a){i=[6,a],d=0}finally{c=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}}}function k(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}function l(a,b){for(var c in a)"default"===c||b.hasOwnProperty(c)||(b[c]=a[c])}function m(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")}function n(a,b){var c="function"==typeof Symbol&&a[Symbol.iterator];if(!c)return a;var d,e,f=c.call(a),g=[];try{for(;(void 0===b||b-- >0)&&!(d=f.next()).done;)g.push(d.value)}catch(a){e={error:a}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(e)throw e.error}}return g}function o(){for(var a=[],b=0;b<arguments.length;b++)a=a.concat(n(arguments[b]));return a}function p(){for(var a=0,b=0,c=arguments.length;b<c;b++)a+=arguments[b].length;for(var d=Array(a),e=0,b=0;b<c;b++)for(var f=arguments[b],g=0,h=f.length;g<h;g++,e++)d[e]=f[g];return d}function q(a){return this instanceof q?(this.v=a,this):new q(a)}function r(a,b,c){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var d,e=c.apply(a,b||[]),f=[];return d={},g("next"),g("throw"),g("return"),d[Symbol.asyncIterator]=function(){return this},d;function g(a){e[a]&&(d[a]=function(b){return new Promise(function(c,d){f.push([a,b,c,d])>1||h(a,b)})})}function h(a,b){try{var c;(c=e[a](b)).value instanceof q?Promise.resolve(c.value.v).then(i,j):k(f[0][2],c)}catch(a){k(f[0][3],a)}}function i(a){h("next",a)}function j(a){h("throw",a)}function k(a,b){a(b),f.shift(),f.length&&h(f[0][0],f[0][1])}}function s(a){var b,c;return b={},d("next"),d("throw",function(a){throw a}),d("return"),b[Symbol.iterator]=function(){return this},b;function d(d,e){b[d]=a[d]?function(b){return(c=!c)?{value:q(a[d](b)),done:"return"===d}:e?e(b):b}:e}}function t(a){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var b,c=a[Symbol.asyncIterator];return c?c.call(a):(a=m(a),b={},d("next"),d("throw"),d("return"),b[Symbol.asyncIterator]=function(){return this},b);function d(c){b[c]=a[c]&&function(b){return new Promise(function(d,e){var f,g,h;f=d,g=e,h=(b=a[c](b)).done,Promise.resolve(b.value).then(function(a){f({value:a,done:h})},g)})}}}function u(a,b){return Object.defineProperty?Object.defineProperty(a,"raw",{value:b}):a.raw=b,a}function v(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function w(a){return a&&a.__esModule?a:{default:a}}function x(a,b){if(!b.has(a))throw TypeError("attempted to get private field on non-instance");return b.get(a)}function y(a,b,c){if(!b.has(a))throw TypeError("attempted to set private field on non-instance");return b.set(a,c),c}a.s(["__assign",()=>d,"__asyncDelegator",()=>s,"__asyncGenerator",()=>r,"__asyncValues",()=>t,"__await",()=>q,"__awaiter",()=>i,"__classPrivateFieldGet",()=>x,"__classPrivateFieldSet",()=>y,"__createBinding",()=>k,"__decorate",()=>f,"__exportStar",()=>l,"__extends",()=>c,"__generator",()=>j,"__importDefault",()=>w,"__importStar",()=>v,"__makeTemplateObject",()=>u,"__metadata",()=>h,"__param",()=>g,"__read",()=>n,"__rest",()=>e,"__spread",()=>o,"__spreadArrays",()=>p,"__values",()=>m])},708029,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.delay=void 0,c.delay=function(a){return new Promise(b=>{setTimeout(()=>{b(!0)},a)})}},145775,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.ONE_THOUSAND=c.ONE_HUNDRED=void 0,c.ONE_HUNDRED=100,c.ONE_THOUSAND=1e3},159162,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.ONE_YEAR=c.FOUR_WEEKS=c.THREE_WEEKS=c.TWO_WEEKS=c.ONE_WEEK=c.THIRTY_DAYS=c.SEVEN_DAYS=c.FIVE_DAYS=c.THREE_DAYS=c.ONE_DAY=c.TWENTY_FOUR_HOURS=c.TWELVE_HOURS=c.SIX_HOURS=c.THREE_HOURS=c.ONE_HOUR=c.SIXTY_MINUTES=c.THIRTY_MINUTES=c.TEN_MINUTES=c.FIVE_MINUTES=c.ONE_MINUTE=c.SIXTY_SECONDS=c.THIRTY_SECONDS=c.TEN_SECONDS=c.FIVE_SECONDS=c.ONE_SECOND=void 0,c.ONE_SECOND=1,c.FIVE_SECONDS=5,c.TEN_SECONDS=10,c.THIRTY_SECONDS=30,c.SIXTY_SECONDS=60,c.ONE_MINUTE=c.SIXTY_SECONDS,c.FIVE_MINUTES=5*c.ONE_MINUTE,c.TEN_MINUTES=10*c.ONE_MINUTE,c.THIRTY_MINUTES=30*c.ONE_MINUTE,c.SIXTY_MINUTES=60*c.ONE_MINUTE,c.ONE_HOUR=c.SIXTY_MINUTES,c.THREE_HOURS=3*c.ONE_HOUR,c.SIX_HOURS=6*c.ONE_HOUR,c.TWELVE_HOURS=12*c.ONE_HOUR,c.TWENTY_FOUR_HOURS=24*c.ONE_HOUR,c.ONE_DAY=c.TWENTY_FOUR_HOURS,c.THREE_DAYS=3*c.ONE_DAY,c.FIVE_DAYS=5*c.ONE_DAY,c.SEVEN_DAYS=7*c.ONE_DAY,c.THIRTY_DAYS=30*c.ONE_DAY,c.ONE_WEEK=c.SEVEN_DAYS,c.TWO_WEEKS=2*c.ONE_WEEK,c.THREE_WEEKS=3*c.ONE_WEEK,c.FOUR_WEEKS=4*c.ONE_WEEK,c.ONE_YEAR=365*c.ONE_DAY},553628,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(108219);d.__exportStar(a.r(145775),c),d.__exportStar(a.r(159162),c)},465290,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.fromMiliseconds=c.toMiliseconds=void 0;let d=a.r(553628);c.toMiliseconds=function(a){return a*d.ONE_THOUSAND},c.fromMiliseconds=function(a){return Math.floor(a/d.ONE_THOUSAND)}},486805,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(108219);d.__exportStar(a.r(708029),c),d.__exportStar(a.r(465290),c)},835315,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.Watch=void 0;class d{constructor(){this.timestamps=new Map}start(a){if(this.timestamps.has(a))throw Error(`Watch already started for label: ${a}`);this.timestamps.set(a,{started:Date.now()})}stop(a){let b=this.get(a);if(void 0!==b.elapsed)throw Error(`Watch already stopped for label: ${a}`);let c=Date.now()-b.started;this.timestamps.set(a,{started:b.started,elapsed:c})}get(a){let b=this.timestamps.get(a);if(void 0===b)throw Error(`No timestamp found for label: ${a}`);return b}elapsed(a){let b=this.get(a);return b.elapsed||Date.now()-b.started}}c.Watch=d,c.default=d},229323,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.IWatch=void 0,c.IWatch=class{}},230635,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),a.r(108219).__exportStar(a.r(229323),c)},673620,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(108219);d.__exportStar(a.r(486805),c),d.__exportStar(a.r(835315),c),d.__exportStar(a.r(230635),c),d.__exportStar(a.r(553628),c)},241958,693172,157938,212566,a=>{"use strict";var b=a.i(427699),c=a.i(673620);class d{}a.s(["IEvents",()=>d],693172),a.s([],157938);class e extends d{constructor(a){super()}}let f=c.FIVE_SECONDS,g={pulse:"heartbeat_pulse"};class h extends e{constructor(a){super(a),this.events=new b.EventEmitter,this.interval=f,this.interval=a?.interval||f}static async init(a){let b=new h(a);return await b.init(),b}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(a,b){this.events.on(a,b)}once(a,b){this.events.once(a,b)}off(a,b){this.events.off(a,b)}removeListener(a,b){this.events.removeListener(a,b)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),(0,c.toMiliseconds)(this.interval))}pulse(){this.events.emit(g.pulse)}}a.s(["HEARTBEAT_EVENTS",()=>g,"HeartBeat",()=>h],241958);let i=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,j=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,k=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function l(a,b){var c;return"__proto__"===a||"constructor"===a&&b&&"object"==typeof b&&"prototype"in b?void(c=a,console.warn(`[destr] Dropping "${c}" key to prevent prototype pollution.`)):b}function m(a,b={}){if("string"!=typeof a)return a;if('"'===a[0]&&'"'===a[a.length-1]&&-1===a.indexOf("\\"))return a.slice(1,-1);let c=a.trim();if(c.length<=9)switch(c.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return NaN;case"infinity":return 1/0;case"-infinity":return-1/0}if(!k.test(a)){if(b.strict)throw SyntaxError("[destr] Invalid JSON");return a}try{if(i.test(a)||j.test(a)){if(b.strict)throw Error("[destr] Possible prototype pollution");return JSON.parse(a,l)}return JSON.parse(a)}catch(c){if(b.strict)throw c;return a}}function n(a,...b){try{var c;return(c=a(...b))&&"function"==typeof c.then?c:Promise.resolve(c)}catch(a){return Promise.reject(a)}}function o(a){let b,c;if(b=typeof a,null===a||"object"!==b&&"function"!==b)return String(a);if(!(c=Object.getPrototypeOf(a))||c.isPrototypeOf(Object)||Array.isArray(a))return JSON.stringify(a);if("function"==typeof a.toJSON)return o(a.toJSON());throw Error("[unstorage] Cannot stringify value!")}let p="base64:";function q(a){return a&&a.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function r(a){return(a=q(a))?a+":":""}function s(a={}){let b,c={mounts:{"":a.driver||(b=new Map,{name:"memory",getInstance:()=>b,hasItem:a=>b.has(a),getItem:a=>b.get(a)??null,getItemRaw:a=>b.get(a)??null,setItem(a,c){b.set(a,c)},setItemRaw(a,c){b.set(a,c)},removeItem(a){b.delete(a)},getKeys:()=>[...b.keys()],clear(){b.clear()},dispose(){b.clear()}})},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},d=a=>{for(let b of c.mountpoints)if(a.startsWith(b))return{base:b,relativeKey:a.slice(b.length),driver:c.mounts[b]};return{base:"",relativeKey:a,driver:c.mounts[""]}},e=(a,b)=>c.mountpoints.filter(c=>c.startsWith(a)||b&&a.startsWith(c)).map(b=>({relativeBase:a.length>b.length?a.slice(b.length):void 0,mountpoint:b,driver:c.mounts[b]})),f=(a,b)=>{if(c.watching)for(let d of(b=q(b),c.watchListeners))d(a,b)},g=async()=>{if(!c.watching)for(let a in c.watching=!0,c.mounts)c.unwatch[a]=await t(c.mounts[a],f,a)},h=async()=>{if(c.watching){for(let a in c.unwatch)await c.unwatch[a]();c.unwatch={},c.watching=!1}},i=(a,b,c)=>{let e=new Map,f=a=>{let b=e.get(a.base);return b||(b={driver:a.driver,base:a.base,items:[]},e.set(a.base,b)),b};for(let c of a){let a="string"==typeof c,e=q(a?c:c.key),g=a?void 0:c.value,h=a||!c.options?b:{...b,...c.options},i=d(e);f(i).items.push({key:e,value:g,relativeKey:i.relativeKey,options:h})}return Promise.all([...e.values()].map(a=>c(a))).then(a=>a.flat())},j={hasItem(a,b={}){let{relativeKey:c,driver:e}=d(a=q(a));return n(e.hasItem,c,b)},getItem(a,b={}){let{relativeKey:c,driver:e}=d(a=q(a));return n(e.getItem,c,b).then(a=>m(a))},getItems:(a,b={})=>i(a,b,a=>a.driver.getItems?n(a.driver.getItems,a.items.map(a=>({key:a.relativeKey,options:a.options})),b).then(b=>b.map(b=>({key:function(...a){return q(a.join(":"))}(a.base,b.key),value:m(b.value)}))):Promise.all(a.items.map(b=>n(a.driver.getItem,b.relativeKey,b.options).then(a=>({key:b.key,value:m(a)}))))),getItemRaw(a,b={}){let{relativeKey:c,driver:e}=d(a=q(a));return e.getItemRaw?n(e.getItemRaw,c,b):n(e.getItem,c,b).then(a=>{var b;return"string"==typeof a&&a.startsWith(p)?(b=a.slice(p.length),globalThis.Buffer?Buffer.from(b,"base64"):Uint8Array.from(globalThis.atob(b),a=>a.codePointAt(0))):a})},async setItem(a,b,c={}){if(void 0===b)return j.removeItem(a);let{relativeKey:e,driver:g}=d(a=q(a));g.setItem&&(await n(g.setItem,e,o(b),c),g.watch||f("update",a))},async setItems(a,b){await i(a,b,async a=>{if(a.driver.setItems)return n(a.driver.setItems,a.items.map(a=>({key:a.relativeKey,value:o(a.value),options:a.options})),b);a.driver.setItem&&await Promise.all(a.items.map(b=>n(a.driver.setItem,b.relativeKey,o(b.value),b.options)))})},async setItemRaw(a,b,c={}){if(void 0===b)return j.removeItem(a,c);let{relativeKey:e,driver:g}=d(a=q(a));if(g.setItemRaw)await n(g.setItemRaw,e,b,c);else{var h;if(!g.setItem)return;await n(g.setItem,e,"string"==typeof b?b:p+(h=b,globalThis.Buffer?Buffer.from(h).toString("base64"):globalThis.btoa(String.fromCodePoint(...h))),c)}g.watch||f("update",a)},async removeItem(a,b={}){"boolean"==typeof b&&(b={removeMeta:b});let{relativeKey:c,driver:e}=d(a=q(a));e.removeItem&&(await n(e.removeItem,c,b),(b.removeMeta||b.removeMata)&&await n(e.removeItem,c+"$",b),e.watch||f("remove",a))},async getMeta(a,b={}){"boolean"==typeof b&&(b={nativeOnly:b});let{relativeKey:c,driver:e}=d(a=q(a)),f=Object.create(null);if(e.getMeta&&Object.assign(f,await n(e.getMeta,c,b)),!b.nativeOnly){let a=await n(e.getItem,c+"$",b).then(a=>m(a));a&&"object"==typeof a&&("string"==typeof a.atime&&(a.atime=new Date(a.atime)),"string"==typeof a.mtime&&(a.mtime=new Date(a.mtime)),Object.assign(f,a))}return f},setMeta(a,b,c={}){return this.setItem(a+"$",b,c)},removeMeta(a,b={}){return this.removeItem(a+"$",b)},async getKeys(a,b={}){let c=e(a=r(a),!0),d=[],f=[],g=!0;for(let a of c){for(let c of(a.driver.flags?.maxDepth||(g=!1),await n(a.driver.getKeys,a.relativeBase,b))){let b=a.mountpoint+q(c);d.some(a=>b.startsWith(a))||f.push(b)}d=[a.mountpoint,...d.filter(b=>!b.startsWith(a.mountpoint))]}let h=void 0!==b.maxDepth&&!g;return f.filter(c=>{var d;return(!h||function(a,b){if(void 0===b)return!0;let c=0,d=a.indexOf(":");for(;d>-1;)c++,d=a.indexOf(":",d+1);return c<=b}(c,b.maxDepth))&&((d=a)?c.startsWith(d)&&"$"!==c[c.length-1]:"$"!==c[c.length-1])})},async clear(a,b={}){a=r(a),await Promise.all(e(a,!1).map(async a=>a.driver.clear?n(a.driver.clear,a.relativeBase,b):a.driver.removeItem?Promise.all((await a.driver.getKeys(a.relativeBase||"",b)).map(c=>a.driver.removeItem(c,b))):void 0))},async dispose(){await Promise.all(Object.values(c.mounts).map(a=>u(a)))},watch:async a=>(await g(),c.watchListeners.push(a),async()=>{c.watchListeners=c.watchListeners.filter(b=>b!==a),0===c.watchListeners.length&&await h()}),async unwatch(){c.watchListeners=[],await h()},mount(a,b){if((a=r(a))&&c.mounts[a])throw Error(`already mounted at ${a}`);return a&&(c.mountpoints.push(a),c.mountpoints.sort((a,b)=>b.length-a.length)),c.mounts[a]=b,c.watching&&Promise.resolve(t(b,f,a)).then(b=>{c.unwatch[a]=b}).catch(console.error),j},async unmount(a,b=!0){(a=r(a))&&c.mounts[a]&&(c.watching&&a in c.unwatch&&(c.unwatch[a]?.(),delete c.unwatch[a]),b&&await u(c.mounts[a]),c.mountpoints=c.mountpoints.filter(b=>b!==a),delete c.mounts[a])},getMount(a=""){let b=d(a=q(a)+":");return{driver:b.driver,base:b.base}},getMounts:(a="",b={})=>e(a=q(a),b.parents).map(a=>({driver:a.driver,base:a.mountpoint})),keys:(a,b={})=>j.getKeys(a,b),get:(a,b={})=>j.getItem(a,b),set:(a,b,c={})=>j.setItem(a,b,c),has:(a,b={})=>j.hasItem(a,b),del:(a,b={})=>j.removeItem(a,b),remove:(a,b={})=>j.removeItem(a,b)};return j}function t(a,b,c){return a.watch?a.watch((a,d)=>b(a,c+d)):()=>{}}async function u(a){"function"==typeof a.dispose&&await n(a.dispose)}a.s(["createStorage",()=>s],212566)},920275,a=>{"use strict";function b(a){if("string"!=typeof a)throw Error(`Cannot safe json parse value of type ${typeof a}`);try{return JSON.parse(a.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3'),(a,b)=>"string"==typeof b&&b.match(/^\d+n$/)?BigInt(b.substring(0,b.length-1)):b)}catch(b){return a}}function c(a){return"string"==typeof a?a:JSON.stringify(a,(a,b)=>"bigint"==typeof b?b.toString()+"n":b)||""}a.s(["safeJsonParse",()=>b,"safeJsonStringify",()=>c])},130146,(a,b,c)=>{b.exports=a.x("pino-28069d5257187539",()=>require("pino-28069d5257187539"))},996840,31620,908578,a=>{"use strict";var b=a.i(212566),c=a.i(404703),d=a.i(920275);class e{constructor(){this.indexedDb=(0,b.createStorage)({driver:((a={})=>{let b,d=a.base&&a.base.length>0?`${a.base}:`:"";return a.dbName&&a.storeName&&(b=(0,c.createStore)(a.dbName,a.storeName)),{name:"idb-keyval",options:a,hasItem:async a=>!(typeof await (0,c.get)(d+a,b)>"u"),getItem:async a=>await (0,c.get)(d+a,b)??null,setItem:(a,e)=>(0,c.set)(d+a,e,b),removeItem:a=>(0,c.del)(d+a,b),getKeys:()=>(0,c.keys)(b),clear:()=>(0,c.clear)(b)}})({dbName:"WALLET_CONNECT_V2_INDEXED_DB",storeName:"keyvaluestorage"})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(a=>[a.key,a.value])}async getItem(a){let b=await this.indexedDb.getItem(a);if(null!==b)return b}async setItem(a,b){await this.indexedDb.setItem(a,(0,d.safeJsonStringify)(b))}async removeItem(a){await this.indexedDb.removeItem(a)}}var f="u">typeof globalThis?globalThis:a.g,g={exports:{}};function h(a){var b;return[a[0],(0,d.safeJsonParse)(null!=(b=a[1])?b:"")]}function i(){}i.prototype.getItem=function(a){return this.hasOwnProperty(a)?String(this[a]):null},i.prototype.setItem=function(a,b){this[a]=String(b)},i.prototype.removeItem=function(a){delete this[a]},i.prototype.clear=function(){let a=this;Object.keys(a).forEach(function(b){a[b]=void 0,delete a[b]})},i.prototype.key=function(a){return a=a||0,Object.keys(this)[a]},i.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),"u">typeof f&&f.localStorage?g.exports=f.localStorage:g.exports=new i;class j{constructor(){this.localStorage=g.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(h)}async getItem(a){let b=this.localStorage.getItem(a);if(null!==b)return(0,d.safeJsonParse)(b)}async setItem(a,b){this.localStorage.setItem(a,(0,d.safeJsonStringify)(b))}async removeItem(a){this.localStorage.removeItem(a)}}let k=async(a,b,c)=>{let d="wc_storage_version",e=await b.getItem(d);if(e&&e>=1)return void c(b);let f=await a.getKeys();if(!f.length)return void c(b);let g=[];for(;f.length;){let c=f.shift();if(!c)continue;let d=c.toLowerCase();if(d.includes("wc@")||d.includes("walletconnect")||d.includes("wc_")||d.includes("wallet_connect")){let d=await a.getItem(c);await b.setItem(c,d),g.push(c)}}await b.setItem(d,1),c(b),l(a,g)},l=async(a,b)=>{b.length&&b.forEach(async b=>{await a.removeItem(b)})};class m{constructor(){this.initialized=!1,this.setInitialized=a=>{this.storage=a,this.initialized=!0};const a=new j;this.storage=a;try{const b=new e;k(a,b,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(a){return await this.initialize(),this.storage.getItem(a)}async setItem(a,b){return await this.initialize(),this.storage.setItem(a,b)}async removeItem(a){return await this.initialize(),this.storage.removeItem(a)}async initialize(){this.initialized||await new Promise(a=>{let b=setInterval(()=>{this.initialized&&(clearInterval(b),a())},20)})}}a.s(["default",()=>m],996840);var n=a.i(130146);let o="custom_context";class p{constructor(a){this.nodeValue=a,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}}class q{constructor(a){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=a,this.sizeInBytes=0}append(a){let b=new p(a);if(b.size>this.maxSizeInBytes)throw Error(`[LinkedList] Value too big to insert into list: ${a} with size ${b.size}`);for(;this.size+b.size>this.maxSizeInBytes;)this.shift();this.head?this.tail&&(this.tail.next=b):this.head=b,this.tail=b,this.lengthInNodes++,this.sizeInBytes+=b.size}shift(){if(!this.head)return;let a=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=a.size}toArray(){let a=[],b=this.head;for(;null!==b;)a.push(b.value),b=b.next;return a}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let a=this.head;return{next:()=>{if(!a)return{done:!0,value:null};let b=a.value;return a=a.next,{done:!1,value:b}}}}}class r{constructor(a,b=1024e3){this.level=a??"error",this.levelValue=n.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=b,this.logs=new q(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(a,b){b===n.levels.values.error?console.error(a):b===n.levels.values.warn?console.warn(a):b===n.levels.values.debug?console.debug(a):b===n.levels.values.trace?console.trace(a):console.log(a)}appendToLogs(a){this.logs.append((0,d.safeJsonStringify)({timestamp:new Date().toISOString(),log:a}));let b="string"==typeof a?JSON.parse(a).level:a.level;b>=this.levelValue&&this.forwardToConsole(a,b)}getLogs(){return this.logs}clearLogs(){this.logs=new q(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(a){let b=this.getLogArray();return b.push((0,d.safeJsonStringify)({extraMetadata:a})),new Blob(b,{type:"application/json"})}}class s{constructor(a,b=1024e3){this.baseChunkLogger=new r(a,b)}write(a){this.baseChunkLogger.appendToLogs(a)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(a){return this.baseChunkLogger.logsToBlob(a)}}var t=Object.defineProperty,u=Object.defineProperties,v=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,z=(a,b,c)=>b in a?t(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[b]=c,A=(a,b)=>{for(var c in b||(b={}))x.call(b,c)&&z(a,c,b[c]);if(w)for(var c of w(b))y.call(b,c)&&z(a,c,b[c]);return a};function B(a){return u(A({},a),v({level:a?.level||"info"}))}function C(a,b=o){return typeof a.bindings>"u"?function(a,b=o){return a[b]||""}(a,b):a.bindings().context||""}function D(a,b,c=o){let d=function(a,b,c=o){let d=C(a,c);return d.trim()?`${d}/${b}`:b}(a,b,c);return function(a,b,c=o){return a[c]=b,a}(a.child({context:d}),d,c)}function E(a){var b;let c;return"u">typeof a.loggerOverride&&"string"!=typeof a.loggerOverride?{logger:a.loggerOverride,chunkLoggerController:null}:(c=new s(null==(b=a.opts)?void 0:b.level,a.maxSizeInBytes),{logger:(0,n.default)(u(A({},a.opts),v({level:"trace"})),c),chunkLoggerController:c})}a.s(["generateChildLogger",()=>D,"generatePlatformLogger",()=>E,"getDefaultLoggerOptions",()=>B,"getLoggerContext",()=>C],31620),a.s(["pino",()=>n.default],908578)},832819,a=>{"use strict";let b,c;var d,e=a.i(673620),f=a.i(920275);function g(a,...b){if(!(a instanceof Uint8Array||ArrayBuffer.isView(a)&&"Uint8Array"===a.constructor.name))throw Error("Uint8Array expected");if(b.length>0&&!b.includes(a.length))throw Error("Uint8Array expected of length "+b+", got length="+a.length)}function h(a,b=!0){if(a.destroyed)throw Error("Hash instance has been destroyed");if(b&&a.finished)throw Error("Hash#digest() has already been called")}let i="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,j=a=>new DataView(a.buffer,a.byteOffset,a.byteLength);function k(a){return"string"==typeof a&&(a=function(a){if("string"!=typeof a)throw Error("utf8ToBytes expected string, got "+typeof a);return new Uint8Array(new TextEncoder().encode(a))}(a)),g(a),a}class l{clone(){return this._cloneInto()}}function m(a=32){if(i&&"function"==typeof i.getRandomValues)return i.getRandomValues(new Uint8Array(a));if(i&&"function"==typeof i.randomBytes)return i.randomBytes(a);throw Error("crypto.getRandomValues must be defined")}class n extends l{constructor(a,b,c,d){super(),this.blockLen=a,this.outputLen=b,this.padOffset=c,this.isLE=d,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(a),this.view=j(this.buffer)}update(a){h(this);let{view:b,buffer:c,blockLen:d}=this,e=(a=k(a)).length;for(let f=0;f<e;){let g=Math.min(d-this.pos,e-f);if(g===d){let b=j(a);for(;d<=e-f;f+=d)this.process(b,f);continue}c.set(a.subarray(f,f+g),this.pos),this.pos+=g,f+=g,this.pos===d&&(this.process(b,0),this.pos=0)}return this.length+=a.length,this.roundClean(),this}digestInto(a){h(this),function(a,b){g(a);let c=b.outputLen;if(a.length<c)throw Error("digestInto() expects output buffer of length at least "+c)}(a,this),this.finished=!0;let{buffer:b,view:c,blockLen:d,isLE:e}=this,{pos:f}=this;b[f++]=128,this.buffer.subarray(f).fill(0),this.padOffset>d-f&&(this.process(c,0),f=0);for(let a=f;a<d;a++)b[a]=0;(function(a,b,c,d){if("function"==typeof a.setBigUint64)return a.setBigUint64(b,c,d);let e=BigInt(32),f=BigInt(0xffffffff),g=Number(c>>e&f),h=Number(c&f),i=4*!!d,j=4*!d;a.setUint32(b+i,g,d),a.setUint32(b+j,h,d)})(c,d-8,BigInt(8*this.length),e),this.process(c,0);let i=j(a),k=this.outputLen;if(k%4)throw Error("_sha2: outputLen should be aligned to 32bit");let l=k/4,m=this.get();if(l>m.length)throw Error("_sha2: outputLen bigger than state");for(let a=0;a<l;a++)i.setUint32(4*a,m[a],e)}digest(){let{buffer:a,outputLen:b}=this;this.digestInto(a);let c=a.slice(0,b);return this.destroy(),c}_cloneInto(a){a||(a=new this.constructor),a.set(...this.get());let{blockLen:b,buffer:c,length:d,finished:e,destroyed:f,pos:g}=this;return a.length=d,a.pos=g,a.finished=e,a.destroyed=f,d%b&&a.buffer.set(c),a}}let o=BigInt(0x100000000-1),p=BigInt(32),q=(a,b,c)=>a>>>c,r=(a,b,c)=>a<<32-c|b>>>c,s=(a,b,c)=>a>>>c|b<<32-c,t=(a,b,c)=>a<<32-c|b>>>c,u=(a,b,c)=>a<<64-c|b>>>c-32,v=(a,b,c)=>a>>>c-32|b<<64-c,w=function(a,b,c,d){let e=(b>>>0)+(d>>>0);return{h:a+c+(e/0x100000000|0)|0,l:0|e}},x=(a,b,c)=>(a>>>0)+(b>>>0)+(c>>>0),y=(a,b,c,d)=>b+c+d+(a/0x100000000|0)|0,z=(a,b,c,d)=>(a>>>0)+(b>>>0)+(c>>>0)+(d>>>0),A=(a,b,c,d,e)=>b+c+d+e+(a/0x100000000|0)|0,B=(a,b,c,d,e,f)=>b+c+d+e+f+(a/0x100000000|0)|0,C=(a,b,c,d,e)=>(a>>>0)+(b>>>0)+(c>>>0)+(d>>>0)+(e>>>0),[D,E]=function(a,b=!1){let c=new Uint32Array(a.length),d=new Uint32Array(a.length);for(let e=0;e<a.length;e++){let{h:f,l:g}=function(a,b=!1){return b?{h:Number(a&o),l:Number(a>>p&o)}:{h:0|Number(a>>p&o),l:0|Number(a&o)}}(a[e],b);[c[e],d[e]]=[f,g]}return[c,d]}(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(a=>BigInt(a))),F=new Uint32Array(80),G=new Uint32Array(80);class H extends n{constructor(){super(128,64,16,!1),this.Ah=0x6a09e667,this.Al=-0xc4336f8,this.Bh=-0x4498517b,this.Bl=-0x7b3558c5,this.Ch=0x3c6ef372,this.Cl=-0x16b07d5,this.Dh=-0x5ab00ac6,this.Dl=0x5f1d36f1,this.Eh=0x510e527f,this.El=-0x52197d2f,this.Fh=-0x64fa9774,this.Fl=0x2b3e6c1f,this.Gh=0x1f83d9ab,this.Gl=-0x4be4295,this.Hh=0x5be0cd19,this.Hl=0x137e2179}get(){let{Ah:a,Al:b,Bh:c,Bl:d,Ch:e,Cl:f,Dh:g,Dl:h,Eh:i,El:j,Fh:k,Fl:l,Gh:m,Gl:n,Hh:o,Hl:p}=this;return[a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p]}set(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){this.Ah=0|a,this.Al=0|b,this.Bh=0|c,this.Bl=0|d,this.Ch=0|e,this.Cl=0|f,this.Dh=0|g,this.Dl=0|h,this.Eh=0|i,this.El=0|j,this.Fh=0|k,this.Fl=0|l,this.Gh=0|m,this.Gl=0|n,this.Hh=0|o,this.Hl=0|p}process(a,b){for(let c=0;c<16;c++,b+=4)F[c]=a.getUint32(b),G[c]=a.getUint32(b+=4);for(let a=16;a<80;a++){let b=0|F[a-15],c=0|G[a-15],d=s(b,c,1)^s(b,c,8)^q(b,c,7),e=t(b,c,1)^t(b,c,8)^r(b,c,7),f=0|F[a-2],g=0|G[a-2],h=s(f,g,19)^u(f,g,61)^q(f,g,6),i=z(e,t(f,g,19)^v(f,g,61)^r(f,g,6),G[a-7],G[a-16]),j=A(i,d,h,F[a-7],F[a-16]);F[a]=0|j,G[a]=0|i}let{Ah:c,Al:d,Bh:e,Bl:f,Ch:g,Cl:h,Dh:i,Dl:j,Eh:k,El:l,Fh:m,Fl:n,Gh:o,Gl:p,Hh:H,Hl:I}=this;for(let a=0;a<80;a++){let b=s(k,l,14)^s(k,l,18)^u(k,l,41),q=t(k,l,14)^t(k,l,18)^v(k,l,41),r=k&m^~k&o,z=C(I,q,l&n^~l&p,E[a],G[a]),A=B(z,H,b,r,D[a],F[a]),J=0|z,K=s(c,d,28)^u(c,d,34)^u(c,d,39),L=t(c,d,28)^v(c,d,34)^v(c,d,39),M=c&e^c&g^e&g,N=d&f^d&h^f&h;H=0|o,I=0|p,o=0|m,p=0|n,m=0|k,n=0|l,({h:k,l:l}=w(0|i,0|j,0|A,0|J)),i=0|g,j=0|h,g=0|e,h=0|f,e=0|c,f=0|d;let O=x(J,L,N);c=y(O,A,K,M),d=0|O}({h:c,l:d}=w(0|this.Ah,0|this.Al,0|c,0|d)),({h:e,l:f}=w(0|this.Bh,0|this.Bl,0|e,0|f)),({h:g,l:h}=w(0|this.Ch,0|this.Cl,0|g,0|h)),({h:i,l:j}=w(0|this.Dh,0|this.Dl,0|i,0|j)),({h:k,l:l}=w(0|this.Eh,0|this.El,0|k,0|l)),({h:m,l:n}=w(0|this.Fh,0|this.Fl,0|m,0|n)),({h:o,l:p}=w(0|this.Gh,0|this.Gl,0|o,0|p)),({h:H,l:I}=w(0|this.Hh,0|this.Hl,0|H,0|I)),this.set(c,d,e,f,g,h,i,j,k,l,m,n,o,p,H,I)}roundClean(){F.fill(0),G.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}let I=(d=()=>new H,(b=a=>d().update(k(a)).digest()).outputLen=(c=d()).outputLen,b.blockLen=c.blockLen,b.create=()=>d(),b),J=BigInt(0),K=BigInt(1),L=BigInt(2);function M(a){return a instanceof Uint8Array||ArrayBuffer.isView(a)&&"Uint8Array"===a.constructor.name}function N(a){if(!M(a))throw Error("Uint8Array expected")}function O(a,b){if("boolean"!=typeof b)throw Error(a+" boolean expected, got "+b)}let P=Array.from({length:256},(a,b)=>b.toString(16).padStart(2,"0"));function Q(a){N(a);let b="";for(let c=0;c<a.length;c++)b+=P[a[c]];return b}function R(a){if("string"!=typeof a)throw Error("hex string expected, got "+typeof a);return""===a?J:BigInt("0x"+a)}function S(a){return a>=48&&a<=57?a-48:a>=65&&a<=70?a-55:a>=97&&a<=102?a-87:void 0}function T(a){if("string"!=typeof a)throw Error("hex string expected, got "+typeof a);let b=a.length,c=b/2;if(b%2)throw Error("hex string expected, got unpadded hex of length "+b);let d=new Uint8Array(c);for(let b=0,e=0;b<c;b++,e+=2){let c=S(a.charCodeAt(e)),f=S(a.charCodeAt(e+1));if(void 0===c||void 0===f)throw Error('hex string expected, got non-hex character "'+(a[e]+a[e+1])+'" at index '+e);d[b]=16*c+f}return d}function U(a){return N(a),R(Q(Uint8Array.from(a).reverse()))}function V(a,b){return T(a.toString(16).padStart(2*b,"0"))}function W(a,b){return V(a,b).reverse()}function X(a,b,c){let d;if("string"==typeof b)try{d=T(b)}catch(b){throw Error(a+" must be hex string or Uint8Array, cause: "+b)}else if(M(b))d=Uint8Array.from(b);else throw Error(a+" must be hex string or Uint8Array");let e=d.length;if("number"==typeof c&&e!==c)throw Error(a+" of length "+c+" expected, got "+e);return d}function Y(...a){let b=0;for(let c=0;c<a.length;c++){let d=a[c];N(d),b+=d.length}let c=new Uint8Array(b);for(let b=0,d=0;b<a.length;b++){let e=a[b];c.set(e,d),d+=e.length}return c}let Z=a=>"bigint"==typeof a&&J<=a;function $(a,b,c,d){if(!(Z(b)&&Z(c)&&Z(d))||!(c<=b)||!(b<d))throw Error("expected valid "+a+": "+c+" <= n < "+d+", got "+b)}let _={bigint:a=>"bigint"==typeof a,function:a=>"function"==typeof a,boolean:a=>"boolean"==typeof a,string:a=>"string"==typeof a,stringOrUint8Array:a=>"string"==typeof a||M(a),isSafeInteger:a=>Number.isSafeInteger(a),array:a=>Array.isArray(a),field:(a,b)=>b.Fp.isValid(a),hash:a=>"function"==typeof a&&Number.isSafeInteger(a.outputLen)};function aa(a,b,c={}){let d=(b,c,d)=>{let e=_[c];if("function"!=typeof e)throw Error("invalid validator function");let f=a[b];if(!(d&&void 0===f)&&!e(f,a))throw Error("param "+String(b)+" is invalid. Expected "+c+", got "+f)};for(let[a,c]of Object.entries(b))d(a,c,!1);for(let[a,b]of Object.entries(c))d(a,b,!0);return a}function ab(a){let b=new WeakMap;return(c,...d)=>{let e=b.get(c);if(void 0!==e)return e;let f=a(c,...d);return b.set(c,f),f}}let ac=BigInt(0),ad=BigInt(1),ae=BigInt(2),af=BigInt(3),ag=BigInt(4),ah=BigInt(5),ai=BigInt(8);function aj(a,b){let c=a%b;return c>=ac?c:b+c}function ak(a,b,c){let d=a;for(;b-- >ac;)d*=d,d%=c;return d}function al(a,b){if(a===ac)throw Error("invert: expected non-zero number");if(b<=ac)throw Error("invert: expected positive modulus, got "+b);let c=aj(a,b),d=b,e=ac,f=ad;for(;c!==ac;){let a=d/c,b=d%c,g=e-f*a;d=c,c=b,e=f,f=g}if(d!==ad)throw Error("invert: does not exist");return aj(e,b)}let am=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function an(a,b){let c=void 0!==b?b:a.toString(2).length,d=Math.ceil(c/8);return{nBitLength:c,nByteLength:d}}function ao(a,b,c=!1,d={}){let e;if(a<=ac)throw Error("invalid field: expected ORDER > 0, got "+a);let{nBitLength:f,nByteLength:g}=an(a,b);if(g>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let h=Object.freeze({ORDER:a,isLE:c,BITS:f,BYTES:g,MASK:(L<<BigInt(f-1))-K,ZERO:ac,ONE:ad,create:b=>aj(b,a),isValid:b=>{if("bigint"!=typeof b)throw Error("invalid field element: expected bigint, got "+typeof b);return ac<=b&&b<a},is0:a=>a===ac,isOdd:a=>(a&ad)===ad,neg:b=>aj(-b,a),eql:(a,b)=>a===b,sqr:b=>aj(b*b,a),add:(b,c)=>aj(b+c,a),sub:(b,c)=>aj(b-c,a),mul:(b,c)=>aj(b*c,a),pow:(a,b)=>(function(a,b,c){if(c<ac)throw Error("invalid exponent, negatives unsupported");if(c===ac)return a.ONE;if(c===ad)return b;let d=a.ONE,e=b;for(;c>ac;)c&ad&&(d=a.mul(d,e)),e=a.sqr(e),c>>=ad;return d})(h,a,b),div:(b,c)=>aj(b*al(c,a),a),sqrN:a=>a*a,addN:(a,b)=>a+b,subN:(a,b)=>a-b,mulN:(a,b)=>a*b,inv:b=>al(b,a),sqrt:d.sqrt||(b=>(e||(e=function(a){if(a%ag===af){let b=(a+ad)/ag;return function(a,c){let d=a.pow(c,b);if(!a.eql(a.sqr(d),c))throw Error("Cannot find square root");return d}}if(a%ai===ah){let b=(a-ah)/ai;return function(a,c){let d=a.mul(c,ae),e=a.pow(d,b),f=a.mul(c,e),g=a.mul(a.mul(f,ae),e),h=a.mul(f,a.sub(g,a.ONE));if(!a.eql(a.sqr(h),c))throw Error("Cannot find square root");return h}}return function(a){let b,c,d,e=(a-ad)/ae;for(b=a-ad,c=0;b%ae===ac;b/=ae,c++);for(d=ae;d<a&&function(a,b,c){if(b<ac)throw Error("invalid exponent, negatives unsupported");if(c<=ac)throw Error("invalid modulus");if(c===ad)return ac;let d=ad;for(;b>ac;)b&ad&&(d=d*a%c),a=a*a%c,b>>=ad;return d}(d,e,a)!==a-ad;d++)if(d>1e3)throw Error("Cannot find square root: likely non-prime P");if(1===c){let b=(a+ad)/ag;return function(a,c){let d=a.pow(c,b);if(!a.eql(a.sqr(d),c))throw Error("Cannot find square root");return d}}let f=(b+ad)/ae;return function(a,g){if(a.pow(g,e)===a.neg(a.ONE))throw Error("Cannot find square root");let h=c,i=a.pow(a.mul(a.ONE,d),b),j=a.pow(g,f),k=a.pow(g,b);for(;!a.eql(k,a.ONE);){if(a.eql(k,a.ZERO))return a.ZERO;let b=1;for(let c=a.sqr(k);b<h&&!a.eql(c,a.ONE);b++)c=a.sqr(c);let c=a.pow(i,ad<<BigInt(h-b-1));i=a.sqr(c),j=a.mul(j,c),k=a.mul(k,i),h=b}return j}}(a)}(a)),e(h,b))),invertBatch:a=>{let b,c,d;return b=Array(a.length),c=a.reduce((a,c,d)=>h.is0(c)?a:(b[d]=a,h.mul(a,c)),h.ONE),d=h.inv(c),a.reduceRight((a,c,d)=>h.is0(c)?a:(b[d]=h.mul(a,b[d]),h.mul(a,c)),d),b},cmov:(a,b,c)=>c?b:a,toBytes:a=>c?W(a,g):V(a,g),fromBytes:a=>{if(a.length!==g)throw Error("Field.fromBytes: expected "+g+" bytes, got "+a.length);return c?U(a):R(Q(a))}});return Object.freeze(h)}let ap=BigInt(0),aq=BigInt(1);function ar(a,b){let c=b.negate();return a?c:b}function as(a,b){if(!Number.isSafeInteger(a)||a<=0||a>b)throw Error("invalid window size, expected [1.."+b+"], got W="+a)}function at(a,b){return as(a,b),{windows:Math.ceil(b/a)+1,windowSize:2**(a-1)}}let au=new WeakMap,av=new WeakMap;function aw(a){return av.get(a)||1}let ax=BigInt(0),ay=BigInt(1),az=BigInt(2),aA=BigInt(8),aB={zip215:!0};BigInt(0),BigInt(1);let aC=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),aD=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);let aE=BigInt(1),aF=BigInt(2);BigInt(3);let aG=BigInt(5),aH=BigInt(8),aI=ao(aC,void 0,!0),aJ=function(a){var b;let c,d=(aa(a.Fp,am.reduce((a,b)=>(a[b]="function",a),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),aa(a,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),c=Object.freeze({...an(a.n,a.nBitLength),...a,p:a.Fp.ORDER}),aa(a,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...c})),{Fp:e,n:f,prehash:g,hash:h,randomBytes:i,nByteLength:j,h:k}=d,l=az<<BigInt(8*j)-ay,m=e.create,n=ao(d.n,d.nBitLength),o=d.uvRatio||((a,b)=>{try{return{isValid:!0,value:e.sqrt(a*e.inv(b))}}catch{return{isValid:!1,value:ax}}}),p=d.adjustScalarBytes||(a=>a),q=d.domain||((a,b,c)=>{if(O("phflag",c),b.length||c)throw Error("Contexts/pre-hash are not supported");return a});function r(a,b){$("coordinate "+a,b,ax,l)}function s(a){if(!(a instanceof v))throw Error("ExtendedPoint expected")}let t=ab((a,b)=>{let{ex:c,ey:d,ez:f}=a,g=a.is0();null==b&&(b=g?aA:e.inv(f));let h=m(c*b),i=m(d*b),j=m(f*b);if(g)return{x:ax,y:ay};if(j!==ay)throw Error("invZ was invalid");return{x:h,y:i}}),u=ab(a=>{let{a:b,d:c}=d;if(a.is0())throw Error("bad point: ZERO");let{ex:e,ey:f,ez:g,et:h}=a,i=m(e*e),j=m(f*f),k=m(g*g),l=m(k*k),n=m(i*b);if(m(k*m(n+j))!==m(l+m(c*m(i*j))))throw Error("bad point: equation left != right (1)");if(m(e*f)!==m(g*h))throw Error("bad point: equation left != right (2)");return!0});class v{constructor(a,b,c,d){this.ex=a,this.ey=b,this.ez=c,this.et=d,r("x",a),r("y",b),r("z",c),r("t",d),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(a){if(a instanceof v)throw Error("extended point not allowed");let{x:b,y:c}=a||{};return r("x",b),r("y",c),new v(b,c,ay,m(b*c))}static normalizeZ(a){let b=e.invertBatch(a.map(a=>a.ez));return a.map((a,c)=>a.toAffine(b[c])).map(v.fromAffine)}static msm(a,b){return function(a,b,c,d){if(function(a,b){if(!Array.isArray(a))throw Error("array expected");a.forEach((a,c)=>{if(!(a instanceof b))throw Error("invalid point at index "+c)})}(c,a),function(a,b){if(!Array.isArray(a))throw Error("array of scalars expected");a.forEach((a,c)=>{if(!b.isValid(a))throw Error("invalid scalar at index "+c)})}(d,b),c.length!==d.length)throw Error("arrays of points and scalars must have equal length");let e=a.ZERO,f=function(a){let b;for(b=0;a>J;a>>=K,b+=1);return b}(BigInt(c.length)),g=f>12?f-3:f>4?f-2:f?2:1,h=(1<<g)-1,i=Array(h+1).fill(e),j=Math.floor((b.BITS-1)/g)*g,k=e;for(let a=j;a>=0;a-=g){i.fill(e);for(let b=0;b<d.length;b++){let e=Number(d[b]>>BigInt(a)&BigInt(h));i[e]=i[e].add(c[b])}let b=e;for(let a=i.length-1,c=e;a>0;a--)c=c.add(i[a]),b=b.add(c);if(k=k.add(b),0!==a)for(let a=0;a<g;a++)k=k.double()}return k}(v,n,a,b)}_setWindowSize(a){y.setWindowSize(this,a)}assertValidity(){u(this)}equals(a){s(a);let{ex:b,ey:c,ez:d}=this,{ex:e,ey:f,ez:g}=a,h=m(b*g),i=m(e*d),j=m(c*g),k=m(f*d);return h===i&&j===k}is0(){return this.equals(v.ZERO)}negate(){return new v(m(-this.ex),this.ey,this.ez,m(-this.et))}double(){let{a:a}=d,{ex:b,ey:c,ez:e}=this,f=m(b*b),g=m(c*c),h=m(az*m(e*e)),i=m(a*f),j=b+c,k=m(m(j*j)-f-g),l=i+g,n=l-h,o=i-g,p=m(k*n),q=m(l*o),r=m(k*o);return new v(p,q,m(n*l),r)}add(a){s(a);let{a:b,d:c}=d,{ex:e,ey:f,ez:g,et:h}=this,{ex:i,ey:j,ez:k,et:l}=a;if(b===BigInt(-1)){let a=m((f-e)*(j+i)),b=m((f+e)*(j-i)),c=m(b-a);if(c===ax)return this.double();let d=m(g*az*l),n=m(h*az*k),o=n+d,p=b+a,q=n-d,r=m(o*c),s=m(p*q),t=m(o*q);return new v(r,s,m(c*p),t)}let n=m(e*i),o=m(f*j),p=m(h*c*l),q=m(g*k),r=m((e+f)*(i+j)-n-o),t=q-p,u=q+p,w=m(o-b*n),x=m(r*t),y=m(u*w),z=m(r*w);return new v(x,y,m(t*u),z)}subtract(a){return this.add(a.negate())}wNAF(a){return y.wNAFCached(this,a,v.normalizeZ)}multiply(a){$("scalar",a,ay,f);let{p:b,f:c}=this.wNAF(a);return v.normalizeZ([b,c])[0]}multiplyUnsafe(a,b=v.ZERO){return $("scalar",a,ax,f),a===ax?x:this.is0()||a===ay?this:y.wNAFCachedUnsafe(this,a,v.normalizeZ,b)}isSmallOrder(){return this.multiplyUnsafe(k).is0()}isTorsionFree(){return y.unsafeLadder(this,f).is0()}toAffine(a){return t(this,a)}clearCofactor(){let{h:a}=d;return a===ay?this:this.multiplyUnsafe(a)}static fromHex(a,b=!1){let{d:c,a:f}=d,g=e.BYTES;a=X("pointHex",a,g),O("zip215",b);let h=a.slice(),i=a[g-1];h[g-1]=-129&i;let j=U(h);$("pointHex.y",j,ax,b?l:e.ORDER);let k=m(j*j),{isValid:n,value:p}=o(m(k-ay),m(c*k-f));if(!n)throw Error("Point.fromHex: invalid y coordinate");let q=(p&ay)===ay,r=(128&i)!=0;if(!b&&p===ax&&r)throw Error("Point.fromHex: x=0 and x_0=1");return r!==q&&(p=m(-p)),v.fromAffine({x:p,y:j})}static fromPrivateKey(a){return z(a).point}toRawBytes(){let{x:a,y:b}=this.toAffine(),c=W(b,e.BYTES);return c[c.length-1]|=a&ay?128:0,c}toHex(){return Q(this.toRawBytes())}}v.BASE=new v(d.Gx,d.Gy,ay,m(d.Gx*d.Gy)),v.ZERO=new v(ax,ay,ay,ax);let{BASE:w,ZERO:x}=v,y=(b=8*j,{constTimeNegate:ar,hasPrecomputes:a=>1!==aw(a),unsafeLadder(a,b,c=v.ZERO){let d=a;for(;b>ap;)b&aq&&(c=c.add(d)),d=d.double(),b>>=aq;return c},precomputeWindow(a,c){let{windows:d,windowSize:e}=at(c,b),f=[],g=a,h=g;for(let a=0;a<d;a++){h=g,f.push(h);for(let a=1;a<e;a++)h=h.add(g),f.push(h);g=h.double()}return f},wNAF(a,c,d){let{windows:e,windowSize:f}=at(a,b),g=v.ZERO,h=v.BASE,i=BigInt(2**a-1),j=2**a,k=BigInt(a);for(let a=0;a<e;a++){let b=a*f,e=Number(d&i);d>>=k,e>f&&(e-=j,d+=aq);let l=b+Math.abs(e)-1,m=a%2!=0,n=e<0;0===e?h=h.add(ar(m,c[b])):g=g.add(ar(n,c[l]))}return{p:g,f:h}},wNAFUnsafe(a,c,d,e=v.ZERO){let{windows:f,windowSize:g}=at(a,b),h=BigInt(2**a-1),i=2**a,j=BigInt(a);for(let a=0;a<f;a++){let b=a*g;if(d===ap)break;let f=Number(d&h);if(d>>=j,f>g&&(f-=i,d+=aq),0===f)continue;let k=c[b+Math.abs(f)-1];f<0&&(k=k.negate()),e=e.add(k)}return e},getPrecomputes(a,b,c){let d=au.get(b);return d||(d=this.precomputeWindow(b,a),1!==a&&au.set(b,c(d))),d},wNAFCached(a,b,c){let d=aw(a);return this.wNAF(d,this.getPrecomputes(d,a,c),b)},wNAFCachedUnsafe(a,b,c,d){let e=aw(a);return 1===e?this.unsafeLadder(a,b,d):this.wNAFUnsafe(e,this.getPrecomputes(e,a,c),b,d)},setWindowSize(a,c){as(c,b),av.set(a,c),au.delete(a)}});function z(a){let b=e.BYTES;a=X("private key",a,b);let c=X("hashed private key",h(a),2*b),d=p(c.slice(0,b)),g=c.slice(b,2*b),i=aj(U(d),f),j=w.multiply(i),k=j.toRawBytes();return{head:d,prefix:g,scalar:i,point:j,pointBytes:k}}function A(a=new Uint8Array,...b){return aj(U(h(q(Y(...b),X("context",a),!!g))),f)}return w._setWindowSize(8),{CURVE:d,getPublicKey:function(a){return z(a).pointBytes},sign:function(a,b,c={}){a=X("message",a),g&&(a=g(a));let{prefix:d,scalar:h,pointBytes:i}=z(b),j=A(c.context,d,a),k=w.multiply(j).toRawBytes(),l=aj(j+A(c.context,k,i,a)*h,f);return $("signature.s",l,ax,f),X("result",Y(k,W(l,e.BYTES)),2*e.BYTES)},verify:function(a,b,c,d=aB){let f,h,i,{context:j,zip215:k}=d,l=e.BYTES;a=X("signature",a,2*l),b=X("message",b),c=X("publicKey",c,l),void 0!==k&&O("zip215",k),g&&(b=g(b));let m=U(a.slice(l,2*l));try{f=v.fromHex(c,k),h=v.fromHex(a.slice(0,l),k),i=w.multiplyUnsafe(m)}catch{return!1}if(!k&&f.isSmallOrder())return!1;let n=A(j,h.toRawBytes(),f.toRawBytes(),b);return h.add(f.multiplyUnsafe(n)).subtract(i).clearCofactor().equals(v.ZERO)},ExtendedPoint:v,utils:{getExtendedPublicKey:z,randomPrivateKey:()=>i(e.BYTES),precompute:(a=8,b=v.BASE)=>(b._setWindowSize(a),b.multiply(BigInt(3)),b)}}}({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:aI,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:aH,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:I,randomBytes:m,adjustScalarBytes:function(a){return a[0]&=248,a[31]&=127,a[31]|=64,a},uvRatio:function(a,b){var c;let d,e,f,g,h,i,j,k,l,m,n,o,p,q,r=aj(b*b*b,aC),s=(c=a*aj(r*r*b,aC),d=BigInt(10),e=BigInt(20),f=BigInt(40),g=BigInt(80),i=ak(h=c*c%aC*c%aC,aF,aC)*h%aC,j=ak(i,aE,aC)*c%aC,k=ak(j,aG,aC)*j%aC,l=ak(k,d,aC)*k%aC,m=ak(l,e,aC)*l%aC,n=ak(m,f,aC)*m%aC,o=ak(n,g,aC)*n%aC,p=ak(o,g,aC)*n%aC,q=ak(p,d,aC)*k%aC,{pow_p_5_8:ak(q,aF,aC)*c%aC,b2:h}).pow_p_5_8,t=aj(a*r*s,aC),u=aj(b*t*t,aC),v=t,w=aj(t*aD,aC),x=u===a,y=u===aj(-a,aC),z=u===aj(-a*aD,aC);return x&&(t=v),(y||z)&&(t=w),(aj(t,aC)&ad)===ad&&(t=aj(-t,aC)),{isValid:x||y,value:t}}}),aK="base64url",aL="utf8",aM="utf8",aN="base58btc";function aO(a){return null!=globalThis.Buffer?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):a}function aP(a=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?aO(globalThis.Buffer.allocUnsafe(a)):new Uint8Array(a)}function aQ(a,b){b||(b=a.reduce((a,b)=>a+b.length,0));let c=aP(b),d=0;for(let b of a)c.set(b,d),d+=b.length;return aO(c)}var aR=function(a,b){if(a.length>=255)throw TypeError("Alphabet too long");for(var c=new Uint8Array(256),d=0;d<c.length;d++)c[d]=255;for(var e=0;e<a.length;e++){var f=a.charAt(e),g=f.charCodeAt(0);if(255!==c[g])throw TypeError(f+" is ambiguous");c[g]=e}var h=a.length,i=a.charAt(0),j=Math.log(h)/Math.log(256),k=Math.log(256)/Math.log(h);function l(a){if("string"!=typeof a)throw TypeError("Expected String");if(0===a.length)return new Uint8Array;var b=0;if(" "!==a[0]){for(var d=0,e=0;a[b]===i;)d++,b++;for(var f=(a.length-b)*j+1>>>0,g=new Uint8Array(f);a[b];){var k=c[a.charCodeAt(b)];if(255===k)return;for(var l=0,m=f-1;(0!==k||l<e)&&-1!==m;m--,l++)k+=h*g[m]>>>0,g[m]=k%256>>>0,k=k/256>>>0;if(0!==k)throw Error("Non-zero carry");e=l,b++}if(" "!==a[b]){for(var n=f-e;n!==f&&0===g[n];)n++;for(var o=new Uint8Array(d+(f-n)),p=d;n!==f;)o[p++]=g[n++];return o}}}return{encode:function(b){if(b instanceof Uint8Array||(ArrayBuffer.isView(b)?b=new Uint8Array(b.buffer,b.byteOffset,b.byteLength):Array.isArray(b)&&(b=Uint8Array.from(b))),!(b instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===b.length)return"";for(var c=0,d=0,e=0,f=b.length;e!==f&&0===b[e];)e++,c++;for(var g=(f-e)*k+1>>>0,j=new Uint8Array(g);e!==f;){for(var l=b[e],m=0,n=g-1;(0!==l||m<d)&&-1!==n;n--,m++)l+=256*j[n]>>>0,j[n]=l%h>>>0,l=l/h>>>0;if(0!==l)throw Error("Non-zero carry");d=m,e++}for(var o=g-d;o!==g&&0===j[o];)o++;for(var p=i.repeat(c);o<g;++o)p+=a.charAt(j[o]);return p},decodeUnsafe:l,decode:function(a){var c=l(a);if(c)return c;throw Error(`Non-${b} character`)}}};let aS=a=>{if(a instanceof Uint8Array&&"Uint8Array"===a.constructor.name)return a;if(a instanceof ArrayBuffer)return new Uint8Array(a);if(ArrayBuffer.isView(a))return new Uint8Array(a.buffer,a.byteOffset,a.byteLength);throw Error("Unknown type, must be binary type")};class aT{constructor(a,b,c){this.name=a,this.prefix=b,this.baseEncode=c}encode(a){if(a instanceof Uint8Array)return`${this.prefix}${this.baseEncode(a)}`;throw Error("Unknown type, must be binary type")}}class aU{constructor(a,b,c){if(this.name=a,this.prefix=b,void 0===b.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=b.codePointAt(0),this.baseDecode=c}decode(a){if("string"==typeof a){if(a.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(a)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(a.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(a){return aW(this,a)}}class aV{constructor(a){this.decoders=a}or(a){return aW(this,a)}decode(a){let b=a[0],c=this.decoders[b];if(c)return c.decode(a);throw RangeError(`Unable to decode multibase string ${JSON.stringify(a)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}let aW=(a,b)=>new aV({...a.decoders||{[a.prefix]:a},...b.decoders||{[b.prefix]:b}});class aX{constructor(a,b,c,d){this.name=a,this.prefix=b,this.baseEncode=c,this.baseDecode=d,this.encoder=new aT(a,b,c),this.decoder=new aU(a,b,d)}encode(a){return this.encoder.encode(a)}decode(a){return this.decoder.decode(a)}}let aY=({name:a,prefix:b,encode:c,decode:d})=>new aX(a,b,c,d),aZ=({prefix:a,name:b,alphabet:c})=>{let{encode:d,decode:e}=aR(c,b);return aY({prefix:a,name:b,encode:d,decode:a=>aS(e(a))})},a$=({name:a,prefix:b,bitsPerChar:c,alphabet:d})=>aY({prefix:b,name:a,encode:a=>((a,b,c)=>{let d="="===b[b.length-1],e=(1<<c)-1,f="",g=0,h=0;for(let d=0;d<a.length;++d)for(h=h<<8|a[d],g+=8;g>c;)g-=c,f+=b[e&h>>g];if(g&&(f+=b[e&h<<c-g]),d)for(;f.length*c&7;)f+="=";return f})(a,d,c),decode:b=>((a,b,c,d)=>{let e={};for(let a=0;a<b.length;++a)e[b[a]]=a;let f=a.length;for(;"="===a[f-1];)--f;let g=new Uint8Array(f*c/8|0),h=0,i=0,j=0;for(let b=0;b<f;++b){let f=e[a[b]];if(void 0===f)throw SyntaxError(`Non-${d} character`);i=i<<c|f,(h+=c)>=8&&(h-=8,g[j++]=255&i>>h)}if(h>=c||255&i<<8-h)throw SyntaxError("Unexpected end of data");return g})(b,d,c,a)});var a_=Object.freeze({__proto__:null,identity:aY({prefix:"\0",name:"identity",encode:a=>new TextDecoder().decode(a),decode:a=>new TextEncoder().encode(a)})}),a0=Object.freeze({__proto__:null,base2:a$({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})}),a1=Object.freeze({__proto__:null,base8:a$({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})}),a2=Object.freeze({__proto__:null,base10:aZ({prefix:"9",name:"base10",alphabet:"0123456789"})}),a3=Object.freeze({__proto__:null,base16:a$({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper:a$({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})}),a4=Object.freeze({__proto__:null,base32:a$({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper:a$({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad:a$({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper:a$({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex:a$({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper:a$({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad:a$({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper:a$({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z:a$({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})}),a5=Object.freeze({__proto__:null,base36:aZ({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper:aZ({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})}),a6=Object.freeze({__proto__:null,base58btc:aZ({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr:aZ({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})}),a7=Object.freeze({__proto__:null,base64:a$({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad:a$({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url:a$({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad:a$({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});let a8=Array.from(""),a9=a8.reduce((a,b,c)=>(a[c]=b,a),[]),ba=a8.reduce((a,b,c)=>(a[b.codePointAt(0)]=c,a),[]);var bb=Object.freeze({__proto__:null,base256emoji:aY({prefix:"",name:"base256emoji",encode:function(a){return a.reduce((a,b)=>a+=a9[b],"")},decode:function(a){let b=[];for(let c of a){let a=ba[c.codePointAt(0)];if(void 0===a)throw Error(`Non-base256emoji character: ${c}`);b.push(a)}return new Uint8Array(b)}})});function bc(a,b,c){b=b||[],c=c||0;for(var d=c;a>=0x80000000;)b[c++]=255&a|128,a/=128;for(;-128&a;)b[c++]=255&a|128,a>>>=7;return b[c]=0|a,bc.bytes=c-d+1,b}var bd=function(a){return a<128?1:a<16384?2:a<2097152?3:a<0x10000000?4:a<0x800000000?5:a<0x40000000000?6:a<0x2000000000000?7:a<0x100000000000000?8:a<0x8000000000000000?9:10};let be=(a,b,c=0)=>(bc(a,b,c),b),bf=(a,b)=>{let c=b.byteLength,d=bd(a),e=d+bd(c),f=new Uint8Array(e+c);return be(a,f,0),be(c,f,d),f.set(b,e),new bg(a,c,b,f)};class bg{constructor(a,b,c,d){this.code=a,this.size=b,this.digest=c,this.bytes=d}}let bh=({name:a,code:b,encode:c})=>new bi(a,b,c);class bi{constructor(a,b,c){this.name=a,this.code=b,this.encode=c}digest(a){if(a instanceof Uint8Array){let b=this.encode(a);return b instanceof Uint8Array?bf(this.code,b):b.then(a=>bf(this.code,a))}throw Error("Unknown type, must be binary type")}}let bj=a=>async b=>new Uint8Array(await crypto.subtle.digest(a,b));var bk=Object.freeze({__proto__:null,sha256:bh({name:"sha2-256",code:18,encode:bj("SHA-256")}),sha512:bh({name:"sha2-512",code:19,encode:bj("SHA-512")})}),bl=Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:aS,digest:a=>bf(0,aS(a))}});new TextEncoder,new TextDecoder;let bm={...a_,...a0,...a1,...a2,...a3,...a4,...a5,...a6,...a7,...bb};function bn(a,b,c,d){return{name:a,prefix:b,encoder:{name:a,prefix:b,encode:c},decoder:{decode:d}}}({...bk,...bl});let bo=bn("utf8","u",a=>"u"+new TextDecoder("utf8").decode(a),a=>new TextEncoder().encode(a.substring(1))),bp=bn("ascii","a",a=>{let b="a";for(let c=0;c<a.length;c++)b+=String.fromCharCode(a[c]);return b},a=>{let b=aP((a=a.substring(1)).length);for(let c=0;c<a.length;c++)b[c]=a.charCodeAt(c);return b}),bq={utf8:bo,"utf-8":bo,hex:bm.base16,latin1:bp,ascii:bp,binary:bp,...bm};function br(a,b="utf8"){let c=bq[b];if(!c)throw Error(`Unsupported encoding "${b}"`);return("utf8"===b||"utf-8"===b)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(a.buffer,a.byteOffset,a.byteLength).toString("utf8"):c.encoder.encode(a).substring(1)}function bs(a,b="utf8"){let c=bq[b];if(!c)throw Error(`Unsupported encoding "${b}"`);return("utf8"===b||"utf-8"===b)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?aO(globalThis.Buffer.from(a,"utf-8")):c.decoder.decode(`${c.prefix}${a}`)}function bt(a){return(0,f.safeJsonParse)(br(bs(a,aK),aL))}function bu(a){return br(bs((0,f.safeJsonStringify)(a),aL),aK)}function bv(a){return["did:key","z"+br(aQ([bs("K36",aN),a]),aN)].join(":")}function bw(a){let b=a.split(".");return{header:bt(b[0]),payload:bt(b[1]),signature:bs(b[2],aK),data:bs(b.slice(0,2).join("."),aM)}}function bx(a=m(32)){let b=aJ.getPublicKey(a);return{secretKey:aQ([a,b]),publicKey:b}}async function by(a,b,c,d,f=(0,e.fromMiliseconds)(Date.now())){let g={alg:"EdDSA",typ:"JWT"},h={iss:bv(d.publicKey),sub:a,aud:b,iat:f,exp:f+c},i=bs([bu((j={header:g,payload:h}).header),bu(j.payload)].join("."),aM);var j,k={header:g,payload:h,signature:aJ.sign(i,d.secretKey.slice(0,32))};return[bu(k.header),bu(k.payload),br(k.signature,aK)].join(".")}a.s(["decodeJWT",()=>bw,"encodeIss",()=>bv,"generateKeyPair",()=>bx,"signJWT",()=>by])},15388,a=>{"use strict";var b=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},c=function(a,b,c){this.name=a,this.version=b,this.os=c,this.type="browser"},d=function(a){this.version=a,this.type="node",this.name="node",this.os=process.platform},e=function(a,b,c,d){this.name=a,this.version=b,this.os=c,this.bot=d,this.type="bot-device"},f=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},g=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},h=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,i=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],j=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function k(a){return a?l(a):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new g:"undefined"!=typeof navigator?l(navigator.userAgent):"undefined"!=typeof process&&process.version?new d(process.version.slice(1)):null}function l(a){var d=""!==a&&i.reduce(function(b,c){var d=c[0],e=c[1];if(b)return b;var f=e.exec(a);return!!f&&[d,f]},!1);if(!d)return null;var g=d[0],k=d[1];if("searchbot"===g)return new f;var l=k[1]&&k[1].split(".").join("_").split("_").slice(0,3);l?l.length<3&&(l=b(b([],l,!0),function(a){for(var b=[],c=0;c<a;c++)b.push("0");return b}(3-l.length),!0)):l=[];var m=l.join("."),n=function(a){for(var b=0,c=j.length;b<c;b++){var d=j[b],e=d[0];if(d[1].exec(a))return e}return null}(a),o=h.exec(a);return o&&o[1]?new e(g,m,n,o[1]):new c(g,m,n)}a.s(["detect",()=>k])},679628,(a,b,c)=>{"use strict";function d(a){}function e(a){let b=d(a);if(!b)throw Error(`${a} is not defined in Window`);return b}Object.defineProperty(c,"__esModule",{value:!0}),c.getLocalStorage=c.getLocalStorageOrThrow=c.getCrypto=c.getCryptoOrThrow=c.getLocation=c.getLocationOrThrow=c.getNavigator=c.getNavigatorOrThrow=c.getDocument=c.getDocumentOrThrow=c.getFromWindowOrThrow=c.getFromWindow=void 0,c.getFromWindow=d,c.getFromWindowOrThrow=e,c.getDocumentOrThrow=function(){return e("document")},c.getDocument=function(){return d("document")},c.getNavigatorOrThrow=function(){return e("navigator")},c.getNavigator=function(){return d("navigator")},c.getLocationOrThrow=function(){return e("location")},c.getLocation=function(){return d("location")},c.getCryptoOrThrow=function(){return e("crypto")},c.getCrypto=function(){return d("crypto")},c.getLocalStorageOrThrow=function(){return e("localStorage")},c.getLocalStorage=function(){return d("localStorage")}},741721,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.getWindowMetadata=void 0;let d=a.r(679628);c.getWindowMetadata=function(){let a,b,c;try{a=d.getDocumentOrThrow(),b=d.getLocationOrThrow()}catch(a){return null}function e(...b){let c=a.getElementsByTagName("meta");for(let a=0;a<c.length;a++){let d=c[a],e=["itemprop","property","name"].map(a=>d.getAttribute(a)).filter(a=>!!a&&b.includes(a));if(e.length&&e){let a=d.getAttribute("content");if(a)return a}}return""}let f=((c=e("name","og:site_name","og:title","twitter:title"))||(c=a.title),c),g=e("description","og:description","twitter:description","keywords"),h=b.origin;return{description:g,url:h,icons:function(){let c=a.getElementsByTagName("link"),d=[];for(let a=0;a<c.length;a++){let e=c[a],f=e.getAttribute("rel");if(f&&f.toLowerCase().indexOf("icon")>-1){let a=e.getAttribute("href");if(a)if(-1===a.toLowerCase().indexOf("https:")&&-1===a.toLowerCase().indexOf("http:")&&0!==a.indexOf("//")){let c=b.protocol+"//"+b.host;if(0===a.indexOf("/"))c+=a;else{let d=b.pathname.split("/");d.pop(),c+=d.join("/")+"/"+a}d.push(c)}else if(0===a.indexOf("//")){let c=b.protocol+a;d.push(c)}else d.push(a)}}return d}(),name:f}}},78125,60611,864671,282800,73915,a=>{"use strict";function b(a=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(a):new Uint8Array(a)}function c(a,c){c||(c=a.reduce((a,b)=>a+b.length,0));let d=b(c),e=0;for(let b of a)d.set(b,e),e+=b.length;return d}a.s(["concat",()=>c],60611);let d=function(a,b){if(a.length>=255)throw TypeError("Alphabet too long");for(var c=new Uint8Array(256),d=0;d<c.length;d++)c[d]=255;for(var e=0;e<a.length;e++){var f=a.charAt(e),g=f.charCodeAt(0);if(255!==c[g])throw TypeError(f+" is ambiguous");c[g]=e}var h=a.length,i=a.charAt(0),j=Math.log(h)/Math.log(256),k=Math.log(256)/Math.log(h);function l(a){if("string"!=typeof a)throw TypeError("Expected String");if(0===a.length)return new Uint8Array;var b=0;if(" "!==a[0]){for(var d=0,e=0;a[b]===i;)d++,b++;for(var f=(a.length-b)*j+1>>>0,g=new Uint8Array(f);a[b];){var k=c[a.charCodeAt(b)];if(255===k)return;for(var l=0,m=f-1;(0!==k||l<e)&&-1!==m;m--,l++)k+=h*g[m]>>>0,g[m]=k%256>>>0,k=k/256>>>0;if(0!==k)throw Error("Non-zero carry");e=l,b++}if(" "!==a[b]){for(var n=f-e;n!==f&&0===g[n];)n++;for(var o=new Uint8Array(d+(f-n)),p=d;n!==f;)o[p++]=g[n++];return o}}}return{encode:function(b){if(b instanceof Uint8Array||(ArrayBuffer.isView(b)?b=new Uint8Array(b.buffer,b.byteOffset,b.byteLength):Array.isArray(b)&&(b=Uint8Array.from(b))),!(b instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===b.length)return"";for(var c=0,d=0,e=0,f=b.length;e!==f&&0===b[e];)e++,c++;for(var g=(f-e)*k+1>>>0,j=new Uint8Array(g);e!==f;){for(var l=b[e],m=0,n=g-1;(0!==l||m<d)&&-1!==n;n--,m++)l+=256*j[n]>>>0,j[n]=l%h>>>0,l=l/h>>>0;if(0!==l)throw Error("Non-zero carry");d=m,e++}for(var o=g-d;o!==g&&0===j[o];)o++;for(var p=i.repeat(c);o<g;++o)p+=a.charAt(j[o]);return p},decodeUnsafe:l,decode:function(a){var c=l(a);if(c)return c;throw Error(`Non-${b} character`)}}},e=new Uint8Array(0),f=a=>a.reduce((a,b)=>a+b.toString(16).padStart(2,"0"),""),g=a=>{let b=a.match(/../g);return b?new Uint8Array(b.map(a=>parseInt(a,16))):e},h=(a,b)=>{if(a===b)return!0;if(a.byteLength!==b.byteLength)return!1;for(let c=0;c<a.byteLength;c++)if(a[c]!==b[c])return!1;return!0},i=a=>{if(a instanceof Uint8Array&&"Uint8Array"===a.constructor.name)return a;if(a instanceof ArrayBuffer)return new Uint8Array(a);if(ArrayBuffer.isView(a))return new Uint8Array(a.buffer,a.byteOffset,a.byteLength);throw Error("Unknown type, must be binary type")},j=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),k=a=>new TextEncoder().encode(a),l=a=>new TextDecoder().decode(a);a.s(["coerce",()=>i,"empty",()=>e,"equals",()=>h,"fromHex",()=>g,"fromString",()=>k,"isBinary",()=>j,"toHex",()=>f,"toString",()=>l],908619);class m{constructor(a,b,c){this.name=a,this.prefix=b,this.baseEncode=c}encode(a){if(a instanceof Uint8Array)return`${this.prefix}${this.baseEncode(a)}`;throw Error("Unknown type, must be binary type")}}class n{constructor(a,b,c){if(this.name=a,this.prefix=b,void 0===b.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=b.codePointAt(0),this.baseDecode=c}decode(a){if("string"==typeof a){if(a.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(a)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(a.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(a){return p(this,a)}}class o{constructor(a){this.decoders=a}or(a){return p(this,a)}decode(a){let b=a[0],c=this.decoders[b];if(c)return c.decode(a);throw RangeError(`Unable to decode multibase string ${JSON.stringify(a)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}let p=(a,b)=>new o({...a.decoders||{[a.prefix]:a},...b.decoders||{[b.prefix]:b}});class q{constructor(a,b,c,d){this.name=a,this.prefix=b,this.baseEncode=c,this.baseDecode=d,this.encoder=new m(a,b,c),this.decoder=new n(a,b,d)}encode(a){return this.encoder.encode(a)}decode(a){return this.decoder.decode(a)}}let r=({name:a,prefix:b,encode:c,decode:d})=>new q(a,b,c,d),s=({prefix:a,name:b,alphabet:c})=>{let{encode:e,decode:f}=d(c,b);return r({prefix:a,name:b,encode:e,decode:a=>i(f(a))})},t=({name:a,prefix:b,bitsPerChar:c,alphabet:d})=>r({prefix:b,name:a,encode:a=>((a,b,c)=>{let d="="===b[b.length-1],e=(1<<c)-1,f="",g=0,h=0;for(let d=0;d<a.length;++d)for(h=h<<8|a[d],g+=8;g>c;)g-=c,f+=b[e&h>>g];if(g&&(f+=b[e&h<<c-g]),d)for(;f.length*c&7;)f+="=";return f})(a,d,c),decode:b=>((a,b,c,d)=>{let e={};for(let a=0;a<b.length;++a)e[b[a]]=a;let f=a.length;for(;"="===a[f-1];)--f;let g=new Uint8Array(f*c/8|0),h=0,i=0,j=0;for(let b=0;b<f;++b){let f=e[a[b]];if(void 0===f)throw SyntaxError(`Non-${d} character`);i=i<<c|f,(h+=c)>=8&&(h-=8,g[j++]=255&i>>h)}if(h>=c||255&i<<8-h)throw SyntaxError("Unexpected end of data");return g})(b,d,c,a)}),u=r({prefix:"\0",name:"identity",encode:a=>l(a),decode:a=>k(a)});a.s(["identity",0,u],236206);var v=a.i(236206);let w=t({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});a.s(["base2",0,w],412591);var x=a.i(412591);let y=t({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});a.s(["base8",0,y],393571);var z=a.i(393571);let A=s({prefix:"9",name:"base10",alphabet:"0123456789"});a.s(["base10",0,A],965715);var B=a.i(965715);let C=t({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),D=t({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});a.s(["base16",0,C,"base16upper",0,D],767012);var E=a.i(767012);let F=t({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),G=t({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),H=t({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),I=t({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),J=t({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),K=t({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),L=t({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),M=t({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),N=t({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});a.s(["base32",0,F,"base32hex",0,J,"base32hexpad",0,L,"base32hexpadupper",0,M,"base32hexupper",0,K,"base32pad",0,H,"base32padupper",0,I,"base32upper",0,G,"base32z",0,N],625162);var O=a.i(625162);let P=s({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Q=s({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});a.s(["base36",0,P,"base36upper",0,Q],279980);var R=a.i(279980);let S=s({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),T=s({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});a.s(["base58btc",0,S,"base58flickr",0,T],295959);var U=a.i(295959);let V=t({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),W=t({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),X=t({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Y=t({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});a.s(["base64",0,V,"base64pad",0,W,"base64url",0,X,"base64urlpad",0,Y],884919);var Z=a.i(884919);let $=Array.from(""),_=$.reduce((a,b,c)=>(a[c]=b,a),[]),aa=$.reduce((a,b,c)=>(a[b.codePointAt(0)]=c,a),[]),ab=r({prefix:"",name:"base256emoji",encode:function(a){return a.reduce((a,b)=>a+=_[b],"")},decode:function(a){let b=[];for(let c of a){let a=aa[c.codePointAt(0)];if(void 0===a)throw Error(`Non-base256emoji character: ${c}`);b.push(a)}return new Uint8Array(b)}});a.s(["base256emoji",0,ab],438253);var ac=a.i(438253),ad=a.i(254799);function ae(a,b,c){b=b||[];for(var d=c=c||0;a>=0x80000000;)b[c++]=255&a|128,a/=128;for(;-128&a;)b[c++]=255&a|128,a>>>=7;return b[c]=0|a,ae.bytes=c-d+1,b}function af(a,b){var c,d=0,b=b||0,e=0,f=b,g=a.length;do{if(f>=g)throw af.bytes=0,RangeError("Could not decode varint");c=a[f++],d+=e<28?(127&c)<<e:(127&c)*Math.pow(2,e),e+=7}while(c>=128)return af.bytes=f-b,d}let ag=(a,b=0)=>[af(a,b),af.bytes],ah=(a,b,c=0)=>(ae(a,b,c),b),ai=a=>{var b;return(b=a)<128?1:b<16384?2:b<2097152?3:b<0x10000000?4:b<0x800000000?5:b<0x40000000000?6:b<0x2000000000000?7:b<0x100000000000000?8:b<0x8000000000000000?9:10};a.s(["decode",0,ag,"encodeTo",0,ah,"encodingLength",0,ai],703229);let aj=(a,b)=>{let c=b.byteLength,d=ai(a),e=d+ai(c),f=new Uint8Array(e+c);return ah(a,f,0),ah(c,f,d),f.set(b,e),new am(a,c,b,f)},ak=a=>{let b=i(a),[c,d]=ag(b),[e,f]=ag(b.subarray(d)),g=b.subarray(d+f);if(g.byteLength!==e)throw Error("Incorrect length");return new am(c,e,g,b)},al=(a,b)=>a===b||a.code===b.code&&a.size===b.size&&h(a.bytes,b.bytes);class am{constructor(a,b,c,d){this.code=a,this.size=b,this.digest=c,this.bytes=d}}a.s(["Digest",()=>am,"create",0,aj,"decode",0,ak,"equals",0,al],643442);let an=({name:a,code:b,encode:c})=>new ao(a,b,c);class ao{constructor(a,b,c){this.name=a,this.code=b,this.encode=c}digest(a){if(a instanceof Uint8Array){let b=this.encode(a);return b instanceof Uint8Array?aj(this.code,b):b.then(a=>aj(this.code,a))}throw Error("Unknown type, must be binary type")}}a.s(["Hasher",()=>ao,"from",0,an],964955);let ap=an({name:"sha2-256",code:18,encode:a=>i(ad.default.createHash("sha256").update(a).digest())}),aq=an({name:"sha2-512",code:19,encode:a=>i(ad.default.createHash("sha512").update(a).digest())});a.s(["sha256",0,ap,"sha512",0,aq],9822);var ar=a.i(9822);a.s(["identity",0,{code:0,name:"identity",encode:i,digest:a=>aj(0,i(a))}],651817);var as=a.i(651817);a.s(["code",0,85,"decode",0,a=>i(a),"encode",0,a=>i(a),"name",0,"raw"],708321),a.i(708321);let at=new TextEncoder,au=new TextDecoder;a.s(["code",0,512,"decode",0,a=>JSON.parse(au.decode(a)),"encode",0,a=>at.encode(JSON.stringify(a)),"name",0,"json"],954056),a.i(954056);class av{constructor(a,b,c,d){this.code=b,this.version=a,this.multihash=c,this.bytes=d,this.byteOffset=d.byteOffset,this.byteLength=d.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:aE,byteLength:aE,code:aD,version:aD,multihash:aD,bytes:aD,_baseCache:aE,asCID:aE})}toV0(){if(0===this.version)return this;{let{code:a,multihash:b}=this;if(a!==az)throw Error("Cannot convert a non dag-pb CID to CIDv0");if(b.code!==aA)throw Error("Cannot convert non sha2-256 multihash CID to CIDv0");return av.createV0(b)}}toV1(){switch(this.version){case 0:{let{code:a,digest:b}=this.multihash,c=aj(a,b);return av.createV1(this.code,c)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(a){return a&&this.code===a.code&&this.version===a.version&&al(this.multihash,a.multihash)}toString(a){let{bytes:b,version:c,_baseCache:d}=this;return 0===c?ax(b,d,a||S.encoder):ay(b,d,a||F.encoder)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(a){return aF(/^0\.0/,aG),!!(a&&(a[aC]||a.asCID===a))}get toBaseEncodedString(){throw Error("Deprecated, use .toString()")}get codec(){throw Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw Error('"multibaseName" property is deprecated')}get prefix(){throw Error('"prefix" property is deprecated')}static asCID(a){if(a instanceof av)return a;if(null!=a&&a.asCID===a){let{version:b,code:c,multihash:d,bytes:e}=a;return new av(b,c,d,e||aB(b,c,d.bytes))}if(null==a||!0!==a[aC])return null;{let{version:b,multihash:c,code:d}=a,e=ak(c);return av.create(b,d,e)}}static create(a,b,c){if("number"!=typeof b)throw Error("String codecs are no longer supported");switch(a){case 0:if(b===az)return new av(a,b,c,c.bytes);throw Error(`Version 0 CID must use dag-pb (code: ${az}) block encoding`);case 1:{let d=aB(a,b,c.bytes);return new av(a,b,c,d)}default:throw Error("Invalid version")}}static createV0(a){return av.create(0,az,a)}static createV1(a,b){return av.create(1,a,b)}static decode(a){let[b,c]=av.decodeFirst(a);if(c.length)throw Error("Incorrect length");return b}static decodeFirst(a){let b=av.inspectBytes(a),c=b.size-b.multihashSize,d=i(a.subarray(c,c+b.multihashSize));if(d.byteLength!==b.multihashSize)throw Error("Incorrect length");let e=d.subarray(b.multihashSize-b.digestSize),f=new am(b.multihashCode,b.digestSize,e,d);return[0===b.version?av.createV0(f):av.createV1(b.codec,f),a.subarray(b.size)]}static inspectBytes(a){let b=0,c=()=>{let[c,d]=ag(a.subarray(b));return b+=d,c},d=c(),e=az;if(18===d?(d=0,b=0):1===d&&(e=c()),0!==d&&1!==d)throw RangeError(`Invalid CID version ${d}`);let f=b,g=c(),h=c(),i=b+h;return{version:d,codec:e,multihashCode:g,digestSize:h,multihashSize:i-f,size:i}}static parse(a,b){let[c,d]=aw(a,b),e=av.decode(d);return e._baseCache.set(c,a),e}}let aw=(a,b)=>{switch(a[0]){case"Q":{let c=b||S;return[S.prefix,c.decode(`${S.prefix}${a}`)]}case S.prefix:{let c=b||S;return[S.prefix,c.decode(a)]}case F.prefix:{let c=b||F;return[F.prefix,c.decode(a)]}default:if(null==b)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[a[0],b.decode(a)]}},ax=(a,b,c)=>{let{prefix:d}=c;if(d!==S.prefix)throw Error(`Cannot string encode V0 in ${c.name} encoding`);let e=b.get(d);if(null!=e)return e;{let e=c.encode(a).slice(1);return b.set(d,e),e}},ay=(a,b,c)=>{let{prefix:d}=c,e=b.get(d);if(null!=e)return e;{let e=c.encode(a);return b.set(d,e),e}},az=112,aA=18,aB=(a,b,c)=>{let d=ai(a),e=d+ai(b),f=new Uint8Array(e+c.byteLength);return ah(a,f,0),ah(b,f,d),f.set(c,e),f},aC=Symbol.for("@ipld/js-cid/CID"),aD={writable:!1,configurable:!1,enumerable:!0},aE={writable:!1,enumerable:!1,configurable:!1},aF=(a,b)=>{if(a.test("0.0.0-dev"))console.warn(b);else throw Error(b)},aG=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`;a.i(703229),a.i(908619),a.i(964955),a.i(643442);let aH={...v,...x,...z,...B,...E,...O,...R,...U,...Z,...ac};function aI(a,b,c,d){return{name:a,prefix:b,encoder:{name:a,prefix:b,encode:c},decoder:{decode:d}}}({...ar,...as});let aJ=aI("utf8","u",a=>"u"+new TextDecoder("utf8").decode(a),a=>new TextEncoder().encode(a.substring(1))),aK=aI("ascii","a",a=>{let b="a";for(let c=0;c<a.length;c++)b+=String.fromCharCode(a[c]);return b},a=>{let c=b((a=a.substring(1)).length);for(let b=0;b<a.length;b++)c[b]=a.charCodeAt(b);return c}),aL={utf8:aJ,"utf-8":aJ,hex:aH.base16,latin1:aK,ascii:aK,binary:aK,...aH};function aM(a,b="utf8"){let c=aL[b];if(!c)throw Error(`Unsupported encoding "${b}"`);return("utf8"===b||"utf-8"===b)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(a,"utf8"):c.decoder.decode(`${c.prefix}${a}`)}function aN(a,b="utf8"){let c=aL[b];if(!c)throw Error(`Unsupported encoding "${b}"`);return("utf8"===b||"utf-8"===b)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(a.buffer,a.byteOffset,a.byteLength).toString("utf8"):c.encoder.encode(a).substring(1)}a.s(["fromString",()=>aM],864671),a.s(["toString",()=>aN],282800),a.s([],78125);let aO={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};a.s(["RELAY_JSONRPC",()=>aO],73915)},588047,a=>{"use strict";var b=function(a,c){return(b=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(a,c)};function c(a,c){function d(){this.constructor=a}b(a,c),a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}var d=function(){return(d=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};function e(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c}function f(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g}function g(a,b){return function(c,d){b(c,d,a)}}function h(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)}function i(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})}function j(a,b){var c,d,e,f,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return f={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function h(f){return function(h){var i=[f,h];if(c)throw TypeError("Generator is already executing.");for(;g;)try{if(c=1,d&&(e=2&i[0]?d.return:i[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,i[1])).done)return e;switch(d=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return g.label++,{value:i[1],done:!1};case 5:g.label++,d=i[1],i=[0];continue;case 7:i=g.ops.pop(),g.trys.pop();continue;default:if(!(e=(e=g.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){g=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){g.label=i[1];break}if(6===i[0]&&g.label<e[1]){g.label=e[1],e=i;break}if(e&&g.label<e[2]){g.label=e[2],g.ops.push(i);break}e[2]&&g.ops.pop(),g.trys.pop();continue}i=b.call(a,g)}catch(a){i=[6,a],d=0}finally{c=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}}}function k(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}function l(a,b){for(var c in a)"default"===c||b.hasOwnProperty(c)||(b[c]=a[c])}function m(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")}function n(a,b){var c="function"==typeof Symbol&&a[Symbol.iterator];if(!c)return a;var d,e,f=c.call(a),g=[];try{for(;(void 0===b||b-- >0)&&!(d=f.next()).done;)g.push(d.value)}catch(a){e={error:a}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(e)throw e.error}}return g}function o(){for(var a=[],b=0;b<arguments.length;b++)a=a.concat(n(arguments[b]));return a}function p(){for(var a=0,b=0,c=arguments.length;b<c;b++)a+=arguments[b].length;for(var d=Array(a),e=0,b=0;b<c;b++)for(var f=arguments[b],g=0,h=f.length;g<h;g++,e++)d[e]=f[g];return d}function q(a){return this instanceof q?(this.v=a,this):new q(a)}function r(a,b,c){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var d,e=c.apply(a,b||[]),f=[];return d={},g("next"),g("throw"),g("return"),d[Symbol.asyncIterator]=function(){return this},d;function g(a){e[a]&&(d[a]=function(b){return new Promise(function(c,d){f.push([a,b,c,d])>1||h(a,b)})})}function h(a,b){try{var c;(c=e[a](b)).value instanceof q?Promise.resolve(c.value.v).then(i,j):k(f[0][2],c)}catch(a){k(f[0][3],a)}}function i(a){h("next",a)}function j(a){h("throw",a)}function k(a,b){a(b),f.shift(),f.length&&h(f[0][0],f[0][1])}}function s(a){var b,c;return b={},d("next"),d("throw",function(a){throw a}),d("return"),b[Symbol.iterator]=function(){return this},b;function d(d,e){b[d]=a[d]?function(b){return(c=!c)?{value:q(a[d](b)),done:"return"===d}:e?e(b):b}:e}}function t(a){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var b,c=a[Symbol.asyncIterator];return c?c.call(a):(a=m(a),b={},d("next"),d("throw"),d("return"),b[Symbol.asyncIterator]=function(){return this},b);function d(c){b[c]=a[c]&&function(b){return new Promise(function(d,e){var f,g,h;f=d,g=e,h=(b=a[c](b)).done,Promise.resolve(b.value).then(function(a){f({value:a,done:h})},g)})}}}function u(a,b){return Object.defineProperty?Object.defineProperty(a,"raw",{value:b}):a.raw=b,a}function v(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function w(a){return a&&a.__esModule?a:{default:a}}function x(a,b){if(!b.has(a))throw TypeError("attempted to get private field on non-instance");return b.get(a)}function y(a,b,c){if(!b.has(a))throw TypeError("attempted to set private field on non-instance");return b.set(a,c),c}a.s(["__assign",()=>d,"__asyncDelegator",()=>s,"__asyncGenerator",()=>r,"__asyncValues",()=>t,"__await",()=>q,"__awaiter",()=>i,"__classPrivateFieldGet",()=>x,"__classPrivateFieldSet",()=>y,"__createBinding",()=>k,"__decorate",()=>f,"__exportStar",()=>l,"__extends",()=>c,"__generator",()=>j,"__importDefault",()=>w,"__importStar",()=>v,"__makeTemplateObject",()=>u,"__metadata",()=>h,"__param",()=>g,"__read",()=>n,"__rest",()=>e,"__spread",()=>o,"__spreadArrays",()=>p,"__values",()=>m])},283435,(a,b,c)=>{"use strict";function d(){return(null===a.g||void 0===a.g?void 0:a.g.crypto)||(null===a.g||void 0===a.g?void 0:a.g.msCrypto)||{}}function e(){let a=d();return a.subtle||a.webkitSubtle}Object.defineProperty(c,"__esModule",{value:!0}),c.isBrowserCryptoAvailable=c.getSubtleCrypto=c.getBrowerCrypto=void 0,c.getBrowerCrypto=d,c.getSubtleCrypto=e,c.isBrowserCryptoAvailable=function(){return!!d()&&!!e()}},666818,(a,b,c)=>{"use strict";function d(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product}function e(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node}Object.defineProperty(c,"__esModule",{value:!0}),c.isBrowser=c.isNode=c.isReactNative=void 0,c.isReactNative=d,c.isNode=e,c.isBrowser=function(){return!d()&&!e()}},42289,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(588047);d.__exportStar(a.r(283435),c),d.__exportStar(a.r(666818),c)},783855,(a,b,c)=>{"use strict";b.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),EMPTY_BUFFER:Buffer.alloc(0),NOOP:()=>{}}},424321,(a,b,c)=>{"use strict";let{EMPTY_BUFFER:d}=a.r(783855);function e(a,b){if(0===a.length)return d;if(1===a.length)return a[0];let c=Buffer.allocUnsafe(b),e=0;for(let b=0;b<a.length;b++){let d=a[b];c.set(d,e),e+=d.length}return e<b?c.slice(0,e):c}function f(a,b,c,d,e){for(let f=0;f<e;f++)c[d+f]=a[f]^b[3&f]}function g(a,b){let c=a.length;for(let d=0;d<c;d++)a[d]^=b[3&d]}function h(a){return a.byteLength===a.buffer.byteLength?a.buffer:a.buffer.slice(a.byteOffset,a.byteOffset+a.byteLength)}function i(a){let b;return(i.readOnly=!0,Buffer.isBuffer(a))?a:(a instanceof ArrayBuffer?b=Buffer.from(a):ArrayBuffer.isView(a)?b=Buffer.from(a.buffer,a.byteOffset,a.byteLength):(b=Buffer.from(a),i.readOnly=!1),b)}try{let c=a.r(202625),d=c.BufferUtil||c;b.exports={concat:e,mask(a,b,c,e,g){g<48?f(a,b,c,e,g):d.mask(a,b,c,e,g)},toArrayBuffer:h,toBuffer:i,unmask(a,b){a.length<32?g(a,b):d.unmask(a,b)}}}catch(a){b.exports={concat:e,mask:f,toArrayBuffer:h,toBuffer:i,unmask:g}}},303099,(a,b,c)=>{"use strict";let d=Symbol("kDone"),e=Symbol("kRun");b.exports=class{constructor(a){this[d]=()=>{this.pending--,this[e]()},this.concurrency=a||1/0,this.jobs=[],this.pending=0}add(a){this.jobs.push(a),this[e]()}[e](){if(this.pending!==this.concurrency&&this.jobs.length){let a=this.jobs.shift();this.pending++,a(this[d])}}}},90739,(a,b,c)=>{"use strict";let d,e=a.r(406461),f=a.r(424321),g=a.r(303099),{kStatusCode:h,NOOP:i}=a.r(783855),j=Buffer.from([0,0,255,255]),k=Symbol("permessage-deflate"),l=Symbol("total-length"),m=Symbol("callback"),n=Symbol("buffers"),o=Symbol("error");function p(a){this[n].push(a),this[l]+=a.length}function q(a){(this[l]+=a.length,this[k]._maxPayload<1||this[l]<=this[k]._maxPayload)?this[n].push(a):(this[o]=RangeError("Max payload size exceeded"),this[o].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[o][h]=1009,this.removeListener("data",q),this.reset())}function r(a){this[k]._inflate=null,a[h]=1007,this[m](a)}b.exports=class{constructor(a,b,c){this._maxPayload=0|c,this._options=a||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!b,this._deflate=null,this._inflate=null,this.params=null,d||(d=new g(void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10))}static get extensionName(){return"permessage-deflate"}offer(){let a={};return this._options.serverNoContextTakeover&&(a.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(a.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(a.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?a.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(a.client_max_window_bits=!0),a}accept(a){return a=this.normalizeParams(a),this.params=this._isServer?this.acceptAsServer(a):this.acceptAsClient(a),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let a=this._deflate[m];this._deflate.close(),this._deflate=null,a&&a(Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(a){let b=this._options,c=a.find(a=>(!1!==b.serverNoContextTakeover||!a.server_no_context_takeover)&&(!a.server_max_window_bits||!1!==b.serverMaxWindowBits&&("number"!=typeof b.serverMaxWindowBits||!(b.serverMaxWindowBits>a.server_max_window_bits)))&&("number"!=typeof b.clientMaxWindowBits||!!a.client_max_window_bits));if(!c)throw Error("None of the extension offers can be accepted");return b.serverNoContextTakeover&&(c.server_no_context_takeover=!0),b.clientNoContextTakeover&&(c.client_no_context_takeover=!0),"number"==typeof b.serverMaxWindowBits&&(c.server_max_window_bits=b.serverMaxWindowBits),"number"==typeof b.clientMaxWindowBits?c.client_max_window_bits=b.clientMaxWindowBits:(!0===c.client_max_window_bits||!1===b.clientMaxWindowBits)&&delete c.client_max_window_bits,c}acceptAsClient(a){let b=a[0];if(!1===this._options.clientNoContextTakeover&&b.client_no_context_takeover)throw Error('Unexpected parameter "client_no_context_takeover"');if(b.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&b.client_max_window_bits>this._options.clientMaxWindowBits)throw Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(b.client_max_window_bits=this._options.clientMaxWindowBits);return b}normalizeParams(a){return a.forEach(a=>{Object.keys(a).forEach(b=>{let c=a[b];if(c.length>1)throw Error(`Parameter "${b}" must have only a single value`);if(c=c[0],"client_max_window_bits"===b){if(!0!==c){let a=+c;if(!Number.isInteger(a)||a<8||a>15)throw TypeError(`Invalid value for parameter "${b}": ${c}`);c=a}else if(!this._isServer)throw TypeError(`Invalid value for parameter "${b}": ${c}`)}else if("server_max_window_bits"===b){let a=+c;if(!Number.isInteger(a)||a<8||a>15)throw TypeError(`Invalid value for parameter "${b}": ${c}`);c=a}else if("client_no_context_takeover"===b||"server_no_context_takeover"===b){if(!0!==c)throw TypeError(`Invalid value for parameter "${b}": ${c}`)}else throw Error(`Unknown parameter "${b}"`);a[b]=c})}),a}decompress(a,b,c){d.add(d=>{this._decompress(a,b,(a,b)=>{d(),c(a,b)})})}compress(a,b,c){d.add(d=>{this._compress(a,b,(a,b)=>{d(),c(a,b)})})}_decompress(a,b,c){let d=this._isServer?"client":"server";if(!this._inflate){let a=`${d}_max_window_bits`,b="number"!=typeof this.params[a]?e.Z_DEFAULT_WINDOWBITS:this.params[a];this._inflate=e.createInflateRaw({...this._options.zlibInflateOptions,windowBits:b}),this._inflate[k]=this,this._inflate[l]=0,this._inflate[n]=[],this._inflate.on("error",r),this._inflate.on("data",q)}this._inflate[m]=c,this._inflate.write(a),b&&this._inflate.write(j),this._inflate.flush(()=>{let a=this._inflate[o];if(a){this._inflate.close(),this._inflate=null,c(a);return}let e=f.concat(this._inflate[n],this._inflate[l]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[l]=0,this._inflate[n]=[],b&&this.params[`${d}_no_context_takeover`]&&this._inflate.reset()),c(null,e)})}_compress(a,b,c){let d=this._isServer?"server":"client";if(!this._deflate){let a=`${d}_max_window_bits`,b="number"!=typeof this.params[a]?e.Z_DEFAULT_WINDOWBITS:this.params[a];this._deflate=e.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:b}),this._deflate[l]=0,this._deflate[n]=[],this._deflate.on("error",i),this._deflate.on("data",p)}this._deflate[m]=c,this._deflate.write(a),this._deflate.flush(e.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let a=f.concat(this._deflate[n],this._deflate[l]);b&&(a=a.slice(0,a.length-4)),this._deflate[m]=null,this._deflate[l]=0,this._deflate[n]=[],b&&this.params[`${d}_no_context_takeover`]&&this._deflate.reset(),c(null,a)})}}},780553,(a,b,c)=>{"use strict";function d(a){return a>=1e3&&a<=1014&&1004!==a&&1005!==a&&1006!==a||a>=3e3&&a<=4999}function e(a){let b=a.length,c=0;for(;c<b;)if((128&a[c])==0)c++;else if((224&a[c])==192){if(c+1===b||(192&a[c+1])!=128||(254&a[c])==192)return!1;c+=2}else if((240&a[c])==224){if(c+2>=b||(192&a[c+1])!=128||(192&a[c+2])!=128||224===a[c]&&(224&a[c+1])==128||237===a[c]&&(224&a[c+1])==160)return!1;c+=3}else{if((248&a[c])!=240||c+3>=b||(192&a[c+1])!=128||(192&a[c+2])!=128||(192&a[c+3])!=128||240===a[c]&&(240&a[c+1])==128||244===a[c]&&a[c+1]>143||a[c]>244)return!1;c+=4}return!0}try{let c=a.r(399873);"object"==typeof c&&(c=c.Validation.isValidUTF8),b.exports={isValidStatusCode:d,isValidUTF8:a=>a.length<150?e(a):c(a)}}catch(a){b.exports={isValidStatusCode:d,isValidUTF8:e}}},303833,(a,b,c)=>{"use strict";let{Writable:d}=a.r(688947),e=a.r(90739),{BINARY_TYPES:f,EMPTY_BUFFER:g,kStatusCode:h,kWebSocket:i}=a.r(783855),{concat:j,toArrayBuffer:k,unmask:l}=a.r(424321),{isValidStatusCode:m,isValidUTF8:n}=a.r(780553);function o(a,b,c,d,e){let f=new a(c?`Invalid WebSocket frame: ${b}`:b);return Error.captureStackTrace(f,o),f.code=e,f[h]=d,f}b.exports=class extends d{constructor(a,b,c,d){super(),this._binaryType=a||f[0],this[i]=void 0,this._extensions=b||{},this._isServer=!!c,this._maxPayload=0|d,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=0,this._loop=!1}_write(a,b,c){if(8===this._opcode&&0==this._state)return c();this._bufferedBytes+=a.length,this._buffers.push(a),this.startLoop(c)}consume(a){if(this._bufferedBytes-=a,a===this._buffers[0].length)return this._buffers.shift();if(a<this._buffers[0].length){let b=this._buffers[0];return this._buffers[0]=b.slice(a),b.slice(0,a)}let b=Buffer.allocUnsafe(a);do{let c=this._buffers[0],d=b.length-a;a>=c.length?b.set(this._buffers.shift(),d):(b.set(new Uint8Array(c.buffer,c.byteOffset,a),d),this._buffers[0]=c.slice(a)),a-=c.length}while(a>0)return b}startLoop(a){let b;this._loop=!0;do switch(this._state){case 0:b=this.getInfo();break;case 1:b=this.getPayloadLength16();break;case 2:b=this.getPayloadLength64();break;case 3:this.getMask();break;case 4:b=this.getData(a);break;default:this._loop=!1;return}while(this._loop)a(b)}getInfo(){if(this._bufferedBytes<2){this._loop=!1;return}let a=this.consume(2);if((48&a[0])!=0)return this._loop=!1,o(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");let b=(64&a[0])==64;if(b&&!this._extensions[e.extensionName])return this._loop=!1,o(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=(128&a[0])==128,this._opcode=15&a[0],this._payloadLength=127&a[1],0===this._opcode){if(b)return this._loop=!1,o(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,o(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,o(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=b}else{if(!(this._opcode>7)||!(this._opcode<11))return this._loop=!1,o(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin)return this._loop=!1,o(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(b)return this._loop=!1,o(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125)return this._loop=!1,o(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=(128&a[1])==128,this._isServer){if(!this._masked)return this._loop=!1,o(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,o(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(126===this._payloadLength)this._state=1;else{if(127!==this._payloadLength)return this.haveLength();this._state=2}}getPayloadLength16(){if(this._bufferedBytes<2){this._loop=!1;return}return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength()}getPayloadLength64(){if(this._bufferedBytes<8){this._loop=!1;return}let a=this.consume(8),b=a.readUInt32BE(0);return b>2097151?(this._loop=!1,o(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=0x100000000*b+a.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,o(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=3:this._state=4}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=4}getData(a){let b=g;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}b=this.consume(this._payloadLength),this._masked&&l(b,this._mask)}if(this._opcode>7)return this.controlMessage(b);if(this._compressed){this._state=5,this.decompress(b,a);return}return b.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(b)),this.dataMessage()}decompress(a,b){this._extensions[e.extensionName].decompress(a,this._fin,(a,c)=>{if(a)return b(a);if(c.length){if(this._messageLength+=c.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return b(o(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(c)}let d=this.dataMessage();if(d)return b(d);this.startLoop(b)})}dataMessage(){if(this._fin){let a=this._messageLength,b=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let c;c="nodebuffer"===this._binaryType?j(b,a):"arraybuffer"===this._binaryType?k(j(b,a)):b,this.emit("message",c)}else{let c=j(b,a);if(!n(c))return this._loop=!1,o(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",c.toString())}}this._state=0}controlMessage(a){if(8===this._opcode)if(this._loop=!1,0===a.length)this.emit("conclude",1005,""),this.end();else{if(1===a.length)return o(RangeError,"invalid payload length 1",!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");let b=a.readUInt16BE(0);if(!m(b))return o(RangeError,`invalid status code ${b}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");let c=a.slice(2);if(!n(c))return o(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",b,c.toString()),this.end()}else 9===this._opcode?this.emit("ping",a):this.emit("pong",a);this._state=0}}},218307,(a,b,c)=>{"use strict";a.r(504446),a.r(755004);let{randomFillSync:d}=a.r(254799),e=a.r(90739),{EMPTY_BUFFER:f}=a.r(783855),{isValidStatusCode:g}=a.r(780553),{mask:h,toBuffer:i}=a.r(424321),j=Buffer.alloc(4);class k{constructor(a,b){this._extensions=b||{},this._socket=a,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(a,b){let c=b.mask&&b.readOnly,e=b.mask?6:2,f=a.length;a.length>=65536?(e+=8,f=127):a.length>125&&(e+=2,f=126);let g=Buffer.allocUnsafe(c?a.length+e:e);return(g[0]=b.fin?128|b.opcode:b.opcode,b.rsv1&&(g[0]|=64),g[1]=f,126===f?g.writeUInt16BE(a.length,2):127===f&&(g.writeUInt32BE(0,2),g.writeUInt32BE(a.length,6)),b.mask)?(d(j,0,4),g[1]|=128,g[e-4]=j[0],g[e-3]=j[1],g[e-2]=j[2],g[e-1]=j[3],c)?(h(a,j,g,e,a.length),[g]):(h(a,j,a,0,a.length),[g,a]):[g,a]}close(a,b,c,d){let e;if(void 0===a)e=f;else if("number"==typeof a&&g(a))if(void 0===b||""===b)(e=Buffer.allocUnsafe(2)).writeUInt16BE(a,0);else{let c=Buffer.byteLength(b);if(c>123)throw RangeError("The message must not be greater than 123 bytes");(e=Buffer.allocUnsafe(2+c)).writeUInt16BE(a,0),e.write(b,2)}else throw TypeError("First argument must be a valid error code number");this._deflating?this.enqueue([this.doClose,e,c,d]):this.doClose(e,c,d)}doClose(a,b,c){this.sendFrame(k.frame(a,{fin:!0,rsv1:!1,opcode:8,mask:b,readOnly:!1}),c)}ping(a,b,c){let d=i(a);if(d.length>125)throw RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPing,d,b,i.readOnly,c]):this.doPing(d,b,i.readOnly,c)}doPing(a,b,c,d){this.sendFrame(k.frame(a,{fin:!0,rsv1:!1,opcode:9,mask:b,readOnly:c}),d)}pong(a,b,c){let d=i(a);if(d.length>125)throw RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPong,d,b,i.readOnly,c]):this.doPong(d,b,i.readOnly,c)}doPong(a,b,c,d){this.sendFrame(k.frame(a,{fin:!0,rsv1:!1,opcode:10,mask:b,readOnly:c}),d)}send(a,b,c){let d=i(a),f=this._extensions[e.extensionName],g=b.binary?2:1,h=b.compress;if(this._firstFragment?(this._firstFragment=!1,h&&f&&(h=d.length>=f._threshold),this._compress=h):(h=!1,g=0),b.fin&&(this._firstFragment=!0),f){let a={fin:b.fin,rsv1:h,opcode:g,mask:b.mask,readOnly:i.readOnly};this._deflating?this.enqueue([this.dispatch,d,this._compress,a,c]):this.dispatch(d,this._compress,a,c)}else this.sendFrame(k.frame(d,{fin:b.fin,rsv1:!1,opcode:g,mask:b.mask,readOnly:i.readOnly}),c)}dispatch(a,b,c,d){if(!b)return void this.sendFrame(k.frame(a,c),d);let f=this._extensions[e.extensionName];this._bufferedBytes+=a.length,this._deflating=!0,f.compress(a,c.fin,(b,e)=>{if(this._socket.destroyed){let a=Error("The socket was closed while data was being compressed");"function"==typeof d&&d(a);for(let b=0;b<this._queue.length;b++){let c=this._queue[b][4];"function"==typeof c&&c(a)}return}this._bufferedBytes-=a.length,this._deflating=!1,c.readOnly=!1,this.sendFrame(k.frame(e,c),d),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){let a=this._queue.shift();this._bufferedBytes-=a[1].length,Reflect.apply(a[0],this,a.slice(1))}}enqueue(a){this._bufferedBytes+=a[1].length,this._queue.push(a)}sendFrame(a,b){2===a.length?(this._socket.cork(),this._socket.write(a[0]),this._socket.write(a[1],b),this._socket.uncork()):this._socket.write(a[0],b)}}b.exports=k},975134,(a,b,c)=>{"use strict";class d{constructor(a,b){this.target=b,this.type=a}}class e extends d{constructor(a,b){super("message",b),this.data=a}}class f extends d{constructor(a,b,c){super("close",c),this.wasClean=c._closeFrameReceived&&c._closeFrameSent,this.reason=b,this.code=a}}class g extends d{constructor(a){super("open",a)}}class h extends d{constructor(a,b){super("error",b),this.message=a.message,this.error=a}}b.exports={addEventListener(a,b,c){if("function"!=typeof b)return;function d(a){b.call(this,new e(a,this))}function i(a,c){b.call(this,new f(a,c,this))}function j(a){b.call(this,new h(a,this))}function k(){b.call(this,new g(this))}let l=c&&c.once?"once":"on";"message"===a?(d._listener=b,this[l](a,d)):"close"===a?(i._listener=b,this[l](a,i)):"error"===a?(j._listener=b,this[l](a,j)):"open"===a?(k._listener=b,this[l](a,k)):this[l](a,b)},removeEventListener(a,b){let c=this.listeners(a);for(let d=0;d<c.length;d++)(c[d]===b||c[d]._listener===b)&&this.removeListener(a,c[d])}}},852882,(a,b,c)=>{"use strict";let d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function e(a,b,c){void 0===a[b]?a[b]=[c]:a[b].push(c)}b.exports={format:function(a){return Object.keys(a).map(b=>{let c=a[b];return Array.isArray(c)||(c=[c]),c.map(a=>[b].concat(Object.keys(a).map(b=>{let c=a[b];return Array.isArray(c)||(c=[c]),c.map(a=>!0===a?b:`${b}=${a}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(a){let b,c,f=Object.create(null);if(void 0===a||""===a)return f;let g=Object.create(null),h=!1,i=!1,j=!1,k=-1,l=-1,m=0;for(;m<a.length;m++){let n=a.charCodeAt(m);if(void 0===b)if(-1===l&&1===d[n])-1===k&&(k=m);else if(32===n||9===n)-1===l&&-1!==k&&(l=m);else if(59===n||44===n){if(-1===k)throw SyntaxError(`Unexpected character at index ${m}`);-1===l&&(l=m);let c=a.slice(k,l);44===n?(e(f,c,g),g=Object.create(null)):b=c,k=l=-1}else throw SyntaxError(`Unexpected character at index ${m}`);else if(void 0===c)if(-1===l&&1===d[n])-1===k&&(k=m);else if(32===n||9===n)-1===l&&-1!==k&&(l=m);else if(59===n||44===n){if(-1===k)throw SyntaxError(`Unexpected character at index ${m}`);-1===l&&(l=m),e(g,a.slice(k,l),!0),44===n&&(e(f,b,g),g=Object.create(null),b=void 0),k=l=-1}else if(61===n&&-1!==k&&-1===l)c=a.slice(k,m),k=l=-1;else throw SyntaxError(`Unexpected character at index ${m}`);else if(i){if(1!==d[n])throw SyntaxError(`Unexpected character at index ${m}`);-1===k?k=m:h||(h=!0),i=!1}else if(j)if(1===d[n])-1===k&&(k=m);else if(34===n&&-1!==k)j=!1,l=m;else if(92===n)i=!0;else throw SyntaxError(`Unexpected character at index ${m}`);else if(34===n&&61===a.charCodeAt(m-1))j=!0;else if(-1===l&&1===d[n])-1===k&&(k=m);else if(-1!==k&&(32===n||9===n))-1===l&&(l=m);else if(59===n||44===n){if(-1===k)throw SyntaxError(`Unexpected character at index ${m}`);-1===l&&(l=m);let d=a.slice(k,l);h&&(d=d.replace(/\\/g,""),h=!1),e(g,c,d),44===n&&(e(f,b,g),g=Object.create(null),b=void 0),c=void 0,k=l=-1}else throw SyntaxError(`Unexpected character at index ${m}`)}if(-1===k||j)throw SyntaxError("Unexpected end of input");-1===l&&(l=m);let n=a.slice(k,l);return void 0===b?e(f,n,g):(void 0===c?e(g,n,!0):h?e(g,c,n.replace(/\\/g,"")):e(g,c,n),e(f,b,g)),f}}},413523,(a,b,c)=>{"use strict";let d=a.r(427699),e=a.r(524836),f=a.r(921517),g=a.r(504446),h=a.r(755004),{randomBytes:i,createHash:j}=a.r(254799),{Readable:k}=a.r(688947),{URL:l}=a.r(792509),m=a.r(90739),n=a.r(303833),o=a.r(218307),{BINARY_TYPES:p,EMPTY_BUFFER:q,GUID:r,kStatusCode:s,kWebSocket:t,NOOP:u}=a.r(783855),{addEventListener:v,removeEventListener:w}=a.r(975134),{format:x,parse:y}=a.r(852882),{toBuffer:z}=a.r(424321),A=["CONNECTING","OPEN","CLOSING","CLOSED"],B=[8,13];class C extends d{constructor(a,b,c){super(),this._binaryType=p[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage="",this._closeTimer=null,this._extensions={},this._protocol="",this._readyState=C.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==a?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,Array.isArray(b)?b=b.join(", "):"object"==typeof b&&null!==b&&(c=b,b=void 0),function a(b,c,d,g){let h,k,n={protocolVersion:B[1],maxPayload:0x6400000,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...g,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,host:void 0,path:void 0,port:void 0};if(!B.includes(n.protocolVersion))throw RangeError(`Unsupported protocol version: ${n.protocolVersion} (supported versions: ${B.join(", ")})`);c instanceof l?(h=c,b._url=c.href):(h=new l(c),b._url=c);let o="ws+unix:"===h.protocol;if(!h.host&&(!o||!h.pathname)){let a=Error(`Invalid URL: ${b.url}`);if(0!==b._redirects)return void D(b,a);throw a}let p="wss:"===h.protocol||"https:"===h.protocol,q=p?443:80,s=i(16).toString("base64"),t=p?e.get:f.get;if(n.createConnection=p?F:E,n.defaultPort=n.defaultPort||q,n.port=h.port||q,n.host=h.hostname.startsWith("[")?h.hostname.slice(1,-1):h.hostname,n.headers={"Sec-WebSocket-Version":n.protocolVersion,"Sec-WebSocket-Key":s,Connection:"Upgrade",Upgrade:"websocket",...n.headers},n.path=h.pathname+h.search,n.timeout=n.handshakeTimeout,n.perMessageDeflate&&(k=new m(!0!==n.perMessageDeflate?n.perMessageDeflate:{},!1,n.maxPayload),n.headers["Sec-WebSocket-Extensions"]=x({[m.extensionName]:k.offer()})),d&&(n.headers["Sec-WebSocket-Protocol"]=d),n.origin&&(n.protocolVersion<13?n.headers["Sec-WebSocket-Origin"]=n.origin:n.headers.Origin=n.origin),(h.username||h.password)&&(n.auth=`${h.username}:${h.password}`),o){let a=n.path.split(":");n.socketPath=a[0],n.path=a[1]}if(n.followRedirects){if(0===b._redirects){b._originalUnixSocket=o,b._originalSecure=p,b._originalHostOrSocketPath=o?n.socketPath:h.host;let a=g&&g.headers;if(g={...g,headers:{}},a)for(let[b,c]of Object.entries(a))g.headers[b.toLowerCase()]=c}else{let a=o?!!b._originalUnixSocket&&n.socketPath===b._originalHostOrSocketPath:!b._originalUnixSocket&&h.host===b._originalHostOrSocketPath;a&&(!b._originalSecure||p)||(delete n.headers.authorization,delete n.headers.cookie,a||delete n.headers.host,n.auth=void 0)}n.auth&&!g.headers.authorization&&(g.headers.authorization="Basic "+Buffer.from(n.auth).toString("base64"))}let u=b._req=t(n);n.timeout&&u.on("timeout",()=>{G(b,u,"Opening handshake has timed out")}),u.on("error",a=>{null===u||u.aborted||(u=b._req=null,D(b,a))}),u.on("response",e=>{let f=e.headers.location,h=e.statusCode;if(f&&n.followRedirects&&h>=300&&h<400){let e;if(++b._redirects>n.maxRedirects)return void G(b,u,"Maximum redirects exceeded");u.abort();try{e=new l(f,c)}catch(a){D(b,a);return}a(b,e,d,g)}else b.emit("unexpected-response",u,e)||G(b,u,`Unexpected server response: ${e.statusCode}`)}),u.on("upgrade",(a,c,e)=>{let f;if(b.emit("upgrade",a),b.readyState!==C.CONNECTING)return;u=b._req=null;let g=a.headers.upgrade;if(void 0===g||"websocket"!==g.toLowerCase())return void G(b,c,"Invalid Upgrade header");let h=j("sha1").update(s+r).digest("base64");if(a.headers["sec-websocket-accept"]!==h)return void G(b,c,"Invalid Sec-WebSocket-Accept header");let i=a.headers["sec-websocket-protocol"],l=(d||"").split(/, */);if(!d&&i?f="Server sent a subprotocol but none was requested":d&&!i?f="Server sent no subprotocol":i&&!l.includes(i)&&(f="Server sent an invalid subprotocol"),f)return void G(b,c,f);i&&(b._protocol=i);let o=a.headers["sec-websocket-extensions"];if(void 0!==o){let a;if(!k)return void G(b,c,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");try{a=y(o)}catch(a){G(b,c,"Invalid Sec-WebSocket-Extensions header");return}let d=Object.keys(a);if(d.length){if(1!==d.length||d[0]!==m.extensionName)return void G(b,c,"Server indicated an extension that was not requested");try{k.accept(a[m.extensionName])}catch(a){G(b,c,"Invalid Sec-WebSocket-Extensions header");return}b._extensions[m.extensionName]=k}}b.setSocket(c,e,n.maxPayload)})}(this,a,b,c)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(a){p.includes(a)&&(this._binaryType=a,this._receiver&&(this._receiver._binaryType=a))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get onclose(){}set onclose(a){}get onerror(){}set onerror(a){}get onopen(){}set onopen(a){}get onmessage(){}set onmessage(a){}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(a,b,c){let d=new n(this.binaryType,this._extensions,this._isServer,c);this._sender=new o(a,this._extensions),this._receiver=d,this._socket=a,d[t]=this,a[t]=this,d.on("conclude",I),d.on("drain",J),d.on("error",K),d.on("message",M),d.on("ping",N),d.on("pong",O),a.setTimeout(0),a.setNoDelay(),b.length>0&&a.unshift(b),a.on("close",Q),a.on("data",R),a.on("end",S),a.on("error",T),this._readyState=C.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=C.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[m.extensionName]&&this._extensions[m.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=C.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(a,b){if(this.readyState!==C.CLOSED){if(this.readyState===C.CONNECTING)return G(this,this._req,"WebSocket was closed before the connection was established");if(this.readyState===C.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=C.CLOSING,this._sender.close(a,b,!this._isServer,a=>{!a&&(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)}}ping(a,b,c){if(this.readyState===C.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");("function"==typeof a?(c=a,a=b=void 0):"function"==typeof b&&(c=b,b=void 0),"number"==typeof a&&(a=a.toString()),this.readyState!==C.OPEN)?H(this,a,c):(void 0===b&&(b=!this._isServer),this._sender.ping(a||q,b,c))}pong(a,b,c){if(this.readyState===C.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");("function"==typeof a?(c=a,a=b=void 0):"function"==typeof b&&(c=b,b=void 0),"number"==typeof a&&(a=a.toString()),this.readyState!==C.OPEN)?H(this,a,c):(void 0===b&&(b=!this._isServer),this._sender.pong(a||q,b,c))}send(a,b,c){if(this.readyState===C.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof b&&(c=b,b={}),"number"==typeof a&&(a=a.toString()),this.readyState!==C.OPEN)return void H(this,a,c);let d={binary:"string"!=typeof a,mask:!this._isServer,compress:!0,fin:!0,...b};this._extensions[m.extensionName]||(d.compress=!1),this._sender.send(a||q,d,c)}terminate(){if(this.readyState!==C.CLOSED){if(this.readyState===C.CONNECTING)return G(this,this._req,"WebSocket was closed before the connection was established");this._socket&&(this._readyState=C.CLOSING,this._socket.destroy())}}}function D(a,b){a._readyState=C.CLOSING,a.emit("error",b),a.emitClose()}function E(a){return a.path=a.socketPath,g.connect(a)}function F(a){return a.path=void 0,a.servername||""===a.servername||(a.servername=g.isIP(a.host)?"":a.host),h.connect(a)}function G(a,b,c){a._readyState=C.CLOSING;let d=Error(c);Error.captureStackTrace(d,G),b.setHeader?(b.abort(),b.socket&&!b.socket.destroyed&&b.socket.destroy(),b.once("abort",a.emitClose.bind(a)),a.emit("error",d)):(b.destroy(d),b.once("error",a.emit.bind(a,"error")),b.once("close",a.emitClose.bind(a)))}function H(a,b,c){if(b){let c=z(b).length;a._socket?a._sender._bufferedBytes+=c:a._bufferedAmount+=c}c&&c(Error(`WebSocket is not open: readyState ${a.readyState} (${A[a.readyState]})`))}function I(a,b){let c=this[t];c._closeFrameReceived=!0,c._closeMessage=b,c._closeCode=a,void 0!==c._socket[t]&&(c._socket.removeListener("data",R),process.nextTick(P,c._socket),1005===a?c.close():c.close(a,b))}function J(){this[t]._socket.resume()}function K(a){let b=this[t];void 0!==b._socket[t]&&(b._socket.removeListener("data",R),process.nextTick(P,b._socket),b.close(a[s])),b.emit("error",a)}function L(){this[t].emitClose()}function M(a){this[t].emit("message",a)}function N(a){let b=this[t];b.pong(a,!b._isServer,u),b.emit("ping",a)}function O(a){this[t].emit("pong",a)}function P(a){a.resume()}function Q(){let a,b=this[t];this.removeListener("close",Q),this.removeListener("data",R),this.removeListener("end",S),b._readyState=C.CLOSING,this._readableState.endEmitted||b._closeFrameReceived||b._receiver._writableState.errorEmitted||null===(a=b._socket.read())||b._receiver.write(a),b._receiver.end(),this[t]=void 0,clearTimeout(b._closeTimer),b._receiver._writableState.finished||b._receiver._writableState.errorEmitted?b.emitClose():(b._receiver.on("error",L),b._receiver.on("finish",L))}function R(a){this[t]._receiver.write(a)||this.pause()}function S(){let a=this[t];a._readyState=C.CLOSING,a._receiver.end(),this.end()}function T(){let a=this[t];this.removeListener("error",T),this.on("error",u),a&&(a._readyState=C.CLOSING,this.destroy())}Object.defineProperty(C,"CONNECTING",{enumerable:!0,value:A.indexOf("CONNECTING")}),Object.defineProperty(C.prototype,"CONNECTING",{enumerable:!0,value:A.indexOf("CONNECTING")}),Object.defineProperty(C,"OPEN",{enumerable:!0,value:A.indexOf("OPEN")}),Object.defineProperty(C.prototype,"OPEN",{enumerable:!0,value:A.indexOf("OPEN")}),Object.defineProperty(C,"CLOSING",{enumerable:!0,value:A.indexOf("CLOSING")}),Object.defineProperty(C.prototype,"CLOSING",{enumerable:!0,value:A.indexOf("CLOSING")}),Object.defineProperty(C,"CLOSED",{enumerable:!0,value:A.indexOf("CLOSED")}),Object.defineProperty(C.prototype,"CLOSED",{enumerable:!0,value:A.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","protocol","readyState","url"].forEach(a=>{Object.defineProperty(C.prototype,a,{enumerable:!0})}),["open","error","close","message"].forEach(a=>{Object.defineProperty(C.prototype,`on${a}`,{enumerable:!0,get(){let b=this.listeners(a);for(let a=0;a<b.length;a++)if(b[a]._listener)return b[a]._listener},set(b){let c=this.listeners(a);for(let b=0;b<c.length;b++)c[b]._listener&&this.removeListener(a,c[b]);this.addEventListener(a,b)}})}),C.prototype.addEventListener=v,C.prototype.removeEventListener=w,b.exports=C},127493,(a,b,c)=>{"use strict";let{Duplex:d}=a.r(688947);function e(a){a.emit("close")}function f(){!this.destroyed&&this._writableState.finished&&this.destroy()}function g(a){this.removeListener("error",g),this.destroy(),0===this.listenerCount("error")&&this.emit("error",a)}b.exports=function(a,b){let c=!0,h=!0;function i(){c&&a._socket.resume()}a.readyState===a.CONNECTING?a.once("open",function(){a._receiver.removeAllListeners("drain"),a._receiver.on("drain",i)}):(a._receiver.removeAllListeners("drain"),a._receiver.on("drain",i));let j=new d({...b,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return a.on("message",function(b){j.push(b)||(c=!1,a._socket.pause())}),a.once("error",function(a){j.destroyed||(h=!1,j.destroy(a))}),a.once("close",function(){j.destroyed||j.push(null)}),j._destroy=function(b,c){if(a.readyState===a.CLOSED){c(b),process.nextTick(e,j);return}let d=!1;a.once("error",function(a){d=!0,c(a)}),a.once("close",function(){d||c(b),process.nextTick(e,j)}),h&&a.terminate()},j._final=function(b){a.readyState===a.CONNECTING?a.once("open",function(){j._final(b)}):null!==a._socket&&(a._socket._writableState.finished?(b(),j._readableState.endEmitted&&j.destroy()):(a._socket.once("finish",function(){b()}),a.close()))},j._read=function(){(a.readyState===a.OPEN||a.readyState===a.CLOSING)&&!c&&(c=!0,a._receiver._writableState.needDrain||a._socket.resume())},j._write=function(b,c,d){a.readyState===a.CONNECTING?a.once("open",function(){j._write(b,c,d)}):a.send(b,d)},j.on("end",f),j.on("error",g),j}},356492,(a,b,c)=>{"use strict";let d=a.r(427699),e=a.r(921517);a.r(524836),a.r(504446),a.r(755004);let{createHash:f}=a.r(254799),g=a.r(90739),h=a.r(413523),{format:i,parse:j}=a.r(852882),{GUID:k,kWebSocket:l}=a.r(783855),m=/^[+/0-9A-Za-z]{22}==$/;function n(a){a._state=2,a.emit("close")}function o(){this.destroy()}function p(a,b,c,d){a.writable&&(c=c||e.STATUS_CODES[b],d={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(c),...d},a.write(`HTTP/1.1 ${b} ${e.STATUS_CODES[b]}\r
`+Object.keys(d).map(a=>`${a}: ${d[a]}`).join("\r\n")+"\r\n\r\n"+c)),a.removeListener("error",o),a.destroy()}function q(a){return a.trim()}b.exports=class extends d{constructor(a,b){if(super(),null==(a={maxPayload:0x6400000,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,...a}).port&&!a.server&&!a.noServer||null!=a.port&&(a.server||a.noServer)||a.server&&a.noServer)throw TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=a.port?(this._server=e.createServer((a,b)=>{let c=e.STATUS_CODES[426];b.writeHead(426,{"Content-Length":c.length,"Content-Type":"text/plain"}),b.end(c)}),this._server.listen(a.port,a.host,a.backlog,b)):a.server&&(this._server=a.server),this._server){const a=this.emit.bind(this,"connection");this._removeListeners=function(a,b){for(let c of Object.keys(b))a.on(c,b[c]);return function(){for(let c of Object.keys(b))a.removeListener(c,b[c])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(b,c,d)=>{this.handleUpgrade(b,c,d,a)}})}!0===a.perMessageDeflate&&(a.perMessageDeflate={}),a.clientTracking&&(this.clients=new Set),this.options=a,this._state=0}address(){if(this.options.noServer)throw Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(a){if(a&&this.once("close",a),2===this._state)return void process.nextTick(n,this);if(1===this._state)return;if(this._state=1,this.clients)for(let a of this.clients)a.terminate();let b=this._server;b&&(this._removeListeners(),this._removeListeners=this._server=null,null!=this.options.port)?b.close(n.bind(void 0,this)):process.nextTick(n,this)}shouldHandle(a){if(this.options.path){let b=a.url.indexOf("?");if((-1!==b?a.url.slice(0,b):a.url)!==this.options.path)return!1}return!0}handleUpgrade(a,b,c,d){b.on("error",o);let e=void 0!==a.headers["sec-websocket-key"]&&a.headers["sec-websocket-key"].trim(),f=a.headers.upgrade,h=+a.headers["sec-websocket-version"],i={};if("GET"!==a.method||void 0===f||"websocket"!==f.toLowerCase()||!e||!m.test(e)||8!==h&&13!==h||!this.shouldHandle(a))return p(b,400);if(this.options.perMessageDeflate){let c=new g(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let b=j(a.headers["sec-websocket-extensions"]);b[g.extensionName]&&(c.accept(b[g.extensionName]),i[g.extensionName]=c)}catch(a){return p(b,400)}}if(this.options.verifyClient){let f={origin:a.headers[`${8===h?"sec-websocket-origin":"origin"}`],secure:!!(a.socket.authorized||a.socket.encrypted),req:a};if(2===this.options.verifyClient.length)return void this.options.verifyClient(f,(f,g,h,j)=>{if(!f)return p(b,g||401,h,j);this.completeUpgrade(e,i,a,b,c,d)});if(!this.options.verifyClient(f))return p(b,401)}this.completeUpgrade(e,i,a,b,c,d)}completeUpgrade(a,b,c,d,e,j){if(!d.readable||!d.writable)return d.destroy();if(d[l])throw Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return p(d,503);let m=f("sha1").update(a+k).digest("base64"),n=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${m}`],r=new h(null),s=c.headers["sec-websocket-protocol"];if(s&&(s=s.split(",").map(q),(s=this.options.handleProtocols?this.options.handleProtocols(s,c):s[0])&&(n.push(`Sec-WebSocket-Protocol: ${s}`),r._protocol=s)),b[g.extensionName]){let a=b[g.extensionName].params,c=i({[g.extensionName]:[a]});n.push(`Sec-WebSocket-Extensions: ${c}`),r._extensions=b}this.emit("headers",n,c),d.write(n.concat("\r\n").join("\r\n")),d.removeListener("error",o),r.setSocket(d,e,this.options.maxPayload),this.clients&&(this.clients.add(r),r.on("close",()=>this.clients.delete(r))),j(r,c)}}},769084,(a,b,c)=>{"use strict";let d=a.r(413523);d.createWebSocketStream=a.r(127493),d.Server=a.r(356492),d.Receiver=a.r(303833),d.Sender=a.r(218307),b.exports=d},837591,(a,b,c)=>{let d=a.r(671277),e=d.default||d,f=function(a,b){return/^\/\//.test(a)&&(a="https:"+a),e.call(this,a,b)};f.ponyfill=!0,b.exports=c=f,c.fetch=f,c.Headers=d.Headers,c.Request=d.Request,c.Response=d.Response,c.default=f},271137,499963,517992,258910,901631,419997,a=>{"use strict";var b=a.i(427699);let c="INTERNAL_ERROR",d="SERVER_ERROR",e=[-32700,-32600,-32601,-32602,-32603],f={PARSE_ERROR:{code:-32700,message:"Parse error"},INVALID_REQUEST:{code:-32600,message:"Invalid Request"},METHOD_NOT_FOUND:{code:-32601,message:"Method not found"},INVALID_PARAMS:{code:-32602,message:"Invalid params"},[c]:{code:-32603,message:"Internal error"},[d]:{code:-32e3,message:"Server error"}};function g(a){return Object.keys(f).includes(a)?f[a]:f[d]}function h(a,b,c){return a.message.includes("getaddrinfo ENOTFOUND")||a.message.includes("connect ECONNREFUSED")?Error(`Unavailable ${c} RPC url at ${b}`):a}var i=a.i(42289);function j(a=3){return Date.now()*Math.pow(10,a)+Math.floor(Math.random()*Math.pow(10,a))}function k(a=6){return BigInt(j(a))}function l(a,b,c){return{id:c||j(),jsonrpc:"2.0",method:a,params:b}}function m(a,b){return{id:a,jsonrpc:"2.0",result:b}}function n(a,b,h){var i,j,k,l;let m;return{id:a,jsonrpc:"2.0",error:(i=b,j=h,void 0===i?g(c):("string"==typeof i&&(i=Object.assign(Object.assign({},g(d)),{message:i})),void 0!==j&&(i.data=j),k=i.code,e.includes(k)&&(l=i.code,i=(m=Object.values(f).find(a=>a.code===l))||f[d]),i))}}i.isNode,a.s(["formatJsonRpcError",()=>n,"formatJsonRpcRequest",()=>l,"formatJsonRpcResult",()=>m,"getBigIntRpcId",()=>k,"payloadId",()=>j],499963);class o{}class p extends o{constructor(){super()}}class q extends p{constructor(a){super()}}function r(a,b){let c=function(a){let b=a.match(RegExp(/^\w+:/,"gi"));if(b&&b.length)return b[0]}(a);return void 0!==c&&new RegExp(b).test(c)}function s(a){return r(a,"^https?:")}function t(a){return r(a,"^wss?:")}function u(a){return"object"==typeof a&&"id"in a&&"jsonrpc"in a&&"2.0"===a.jsonrpc}function v(a){return u(a)&&"method"in a}function w(a){return u(a)&&(x(a)||y(a))}function x(a){return"result"in a}function y(a){return"error"in a}a.s(["isJsonRpcError",()=>y,"isJsonRpcRequest",()=>v,"isJsonRpcResponse",()=>w,"isJsonRpcResult",()=>x],517992),a.s([],258910);class z extends q{constructor(a){super(a),this.events=new b.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(a),this.connection.connected&&this.registerEventListeners()}async connect(a=this.connection){await this.open(a)}async disconnect(){await this.close()}on(a,b){this.events.on(a,b)}once(a,b){this.events.once(a,b)}off(a,b){this.events.off(a,b)}removeListener(a,b){this.events.removeListener(a,b)}async request(a,b){return this.requestStrict(l(a.method,a.params||[],a.id||k().toString()),b)}async requestStrict(a,b){return new Promise(async(c,d)=>{if(!this.connection.connected)try{await this.open()}catch(a){d(a)}this.events.on(`${a.id}`,a=>{y(a)?d(a.error):c(a.result)});try{await this.connection.send(a,b)}catch(a){d(a)}})}setConnection(a=this.connection){return a}onPayload(a){this.events.emit("payload",a),w(a)?this.events.emit(`${a.id}`,a):this.events.emit("message",{type:a.method,data:a.params})}onClose(a){a&&3e3===a.code&&this.events.emit("error",Error(`WebSocket connection closed abnormally with code: ${a.code} ${a.reason?`(${a.reason})`:""}`)),this.events.emit("disconnect")}async open(a=this.connection){this.connection===a&&this.connection.connected||(this.connection.connected&&this.close(),"string"==typeof a&&(await this.connection.open(a),a=this.connection),this.connection=this.setConnection(a),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",a=>this.onPayload(a)),this.connection.on("close",a=>this.onClose(a)),this.connection.on("error",a=>this.events.emit("error",a)),this.connection.on("register_error",a=>this.onClose()),this.hasRegisteredEventListeners=!0)}}a.s(["JsonRpcProvider",()=>z],271137);var A=a.i(920275);let B=a=>a.split("?")[0],C="u">typeof WebSocket?WebSocket:"u">typeof a.g.WebSocket?a.g.WebSocket:"u">typeof self&&"u">typeof self.WebSocket?self.WebSocket:a.r(769084);class D{constructor(a){if(this.url=a,this.events=new b.EventEmitter,this.registering=!1,!t(a))throw Error(`Provided URL is not compatible with WebSocket connection: ${a}`);this.url=a}get connected(){return"u">typeof this.socket}get connecting(){return this.registering}on(a,b){this.events.on(a,b)}once(a,b){this.events.once(a,b)}off(a,b){this.events.off(a,b)}removeListener(a,b){this.events.removeListener(a,b)}async open(a=this.url){await this.register(a)}async close(){return new Promise((a,b)=>{typeof this.socket>"u"?b(Error("Connection already closed")):(this.socket.onclose=b=>{this.onClose(b),a()},this.socket.close())})}async send(a){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send((0,A.safeJsonStringify)(a))}catch(b){this.onError(a.id,b)}}register(b=this.url){if(!t(b))throw Error(`Provided URL is not compatible with WebSocket connection: ${b}`);if(this.registering){let a=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=a||this.events.listenerCount("open")>=a)&&this.events.setMaxListeners(a+1),new Promise((a,b)=>{this.events.once("register_error",a=>{this.resetMaxListeners(),b(a)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return b(Error("WebSocket connection is missing or invalid"));a(this.socket)})})}return this.url=b,this.registering=!0,new Promise((c,d)=>{let e=(0,i.isReactNative)()?void 0:{rejectUnauthorized:!RegExp("wss?://localhost(:d{2,5})?").test(b)},f=new C(b,[],e);"u">typeof WebSocket||"u">typeof a.g.WebSocket||"u">typeof self&&"u">typeof self.WebSocket?f.onerror=a=>{d(this.emitError(a.error))}:f.on("error",a=>{d(this.emitError(a))}),f.onopen=()=>{this.onOpen(f),c(f)}})}onOpen(a){a.onmessage=a=>this.onPayload(a),a.onclose=a=>this.onClose(a),this.socket=a,this.registering=!1,this.events.emit("open")}onClose(a){this.socket=void 0,this.registering=!1,this.events.emit("close",a)}onPayload(a){if(typeof a.data>"u")return;let b="string"==typeof a.data?(0,A.safeJsonParse)(a.data):a.data;this.events.emit("payload",b)}onError(a,b){let c=this.parseError(b),d=n(a,c.message||c.toString());this.events.emit("payload",d)}parseError(a,b=this.url){return h(a,B(b),"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(a){let b=this.parseError(Error(a?.message||`WebSocket connection failed for host: ${B(this.url)}`));return this.events.emit("register_error",b),b}}a.s(["default",()=>D],901631);var E=a.i(837591),F=Object.defineProperty,G=Object.defineProperties,H=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,J=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable,L=(a,b,c)=>b in a?F(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[b]=c,M=(a,b)=>{for(var c in b||(b={}))J.call(b,c)&&L(a,c,b[c]);if(I)for(var c of I(b))K.call(b,c)&&L(a,c,b[c]);return a};let N={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};class O{constructor(a,c=!1){if(this.url=a,this.disableProviderPing=c,this.events=new b.EventEmitter,this.isAvailable=!1,this.registering=!1,!s(a))throw Error(`Provided URL is not compatible with HTTP connection: ${a}`);this.url=a,this.disableProviderPing=c}get connected(){return this.isAvailable}get connecting(){return this.registering}on(a,b){this.events.on(a,b)}once(a,b){this.events.once(a,b)}off(a,b){this.events.off(a,b)}removeListener(a,b){this.events.removeListener(a,b)}async open(a=this.url){await this.register(a)}async close(){if(!this.isAvailable)throw Error("Connection already closed");this.onClose()}async send(a){this.isAvailable||await this.register();try{let b,c,d=(0,A.safeJsonStringify)(a),e=await (await (0,E.default)(this.url,(b=M({},N),c={body:d},G(b,H(c))))).json();this.onPayload({data:e})}catch(b){this.onError(a.id,b)}}async register(a=this.url){if(!s(a))throw Error(`Provided URL is not compatible with HTTP connection: ${a}`);if(this.registering){let a=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=a||this.events.listenerCount("open")>=a)&&this.events.setMaxListeners(a+1),new Promise((a,b)=>{this.events.once("register_error",a=>{this.resetMaxListeners(),b(a)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return b(Error("HTTP connection is missing or invalid"));a()})})}this.url=a,this.registering=!0;try{if(!this.disableProviderPing){let b,c,d=(0,A.safeJsonStringify)({id:1,jsonrpc:"2.0",method:"test",params:[]});await (0,E.default)(a,(b=M({},N),c={body:d},G(b,H(c))))}this.onOpen()}catch(b){let a=this.parseError(b);throw this.events.emit("register_error",a),this.onClose(),a}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(a){if(typeof a.data>"u")return;let b="string"==typeof a.data?(0,A.safeJsonParse)(a.data):a.data;this.events.emit("payload",b)}onError(a,b){let c=this.parseError(b),d=n(a,c.message||c.toString());this.events.emit("payload",d)}parseError(a,b=this.url){return h(a,b,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}}a.s(["HttpConnection",()=>O,"default",()=>O],419997)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__19e92028._.js.map